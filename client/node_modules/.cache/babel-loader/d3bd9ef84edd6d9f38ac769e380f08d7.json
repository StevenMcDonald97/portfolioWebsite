{"ast":null,"code":"var _jsxFileName = \"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/src/App/admin/blogTemplate.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { BackButton, UploadImage } from 'src/App/admin/helperComponents';\nimport BlogPostTemplate from 'src/App/admin/blogPostTemplate';\nimport { FaTrashAlt } from \"react-icons/fa\"; // Font Awesome\n\nimport PropTypes from \"prop-types\";\nexport default class BlogTemplate extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getPageData = () => {\n      if (this.props.pageId) {\n        axios.get('/api/getPage', {\n          params: {\n            pageId: this.props.pageId,\n            pageType: \"blog\"\n          }\n        }).then(response => {\n          this.setState({\n            title: response.data.title,\n            text: response.data.text,\n            numPosts: response.data.posts.length,\n            posts: response.data.posts\n          });\n        });\n      }\n    };\n\n    this.state = {\n      title: \"\",\n      text: \"\",\n      numPosts: 0,\n      posts: [],\n      createPage: this.props.createPage,\n      deleted: [],\n      currentPost: null\n    };\n    this.onChange = this.onChange.bind(this);\n    this.addPost = this.addPost.bind(this);\n    this.removePost = this.removePost.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  onChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  componentDidMount() {\n    this.getPageData();\n  }\n\n  addPost(event) {\n    console.log(event.target);\n    const values = [...this.state.posts];\n    values.push({\n      \"title\": \"\",\n      \"blurb\": \"\",\n      \"image\": \"\",\n      paragraphs: [],\n      num: this.state.numPosts,\n      keyValue: new Date().getTime(),\n      num: this.state.numObjs\n    });\n    this.setState({\n      posts: values\n    }, () => this.setState({\n      numPosts: this.state.numPosts + 1\n    }));\n  }\n\n  removePost(index) {\n    const values = [...this.state.posts];\n    const deletedObjs = [...this.state.deleted];\n    deletedObjs.push(values[index]._id);\n    values.splice(index, 1);\n\n    for (var i = index; i < values.length; i++) {\n      values[i].num = values[i].num - 1;\n    }\n\n    this.setState({\n      numObjs: this.state.numObjs - 1\n    }, () => this.setState({\n      posts: values,\n      deleted: deletedObjs\n    }));\n  }\n\n  onSubmit() {\n    var posts = this.state.posts;\n    const PageData = {\n      \"title\": this.state.title,\n      \"text\": this.state.text,\n      \"deleted\": this.state.deleted,\n      \"id\": this.props.pageId\n    };\n\n    if (this.state.createPage) {\n      axios.post('/upload/uploadBlog', PageData).then(response => alert(response.data));\n    } else {\n      axios.post('/edit/editBlog', PageData).then(response => alert(response.data));\n    }\n\n    ;\n    alert(\"Updated Page, refresh to see your changes\");\n  }\n\n  render() {\n    const create_inputs = this.state.posts.map((obj, index) => /*#__PURE__*/React.createElement(PostEditor, {\n      key: obj._id ? obj._id : obj.keyValue,\n      image: obj.image,\n      num: obj.num,\n      title: this.state.posts[index].title,\n      blurb: this.state.posts[index].blurb,\n      paragraphs: this.state.posts[index].paragraphs,\n      date: this.state.posts[index].date,\n      num: this.state.posts[index].num,\n      removePost: this.removePost,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 9\n      }\n    }));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pageEditor\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(BackButton, {\n      backPage: this.props.backPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 5\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"pageForm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"inputGroup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"inputLabel\",\n      htmlFor: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 7\n      }\n    }, \"Title:\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"smallPageField\",\n      name: \"title\",\n      value: this.state.title,\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 7\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"inputGroup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"inputLabel\",\n      htmlFor: \"text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 7\n      }\n    }, \"Description:\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"smallPageField\",\n      name: \"text\",\n      value: this.state.text,\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 7\n      }\n    })), create_inputs, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"button\",\n      onClick: this.addPageObject,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 6\n      }\n    }, \"Create a new Post\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"editSubmitButtons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"editSubmitButton\",\n      onClick: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 7\n      }\n    }, \" Submit \"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"editSubmitButton\",\n      onClick: this.props.backPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 7\n      }\n    }, \"Cancel\"))));\n  }\n\n}\nBlogTemplate.propTypes = {\n  pageId: PropTypes.string,\n  createPage: PropTypes.string,\n  pageType: PropTypes.string,\n  backPage: PropTypes.func.isRequired\n};\n\nclass PostEditor extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      title: this.props.title,\n      blurb: this.props.blurb\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      className: \"pageEditingObject\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"inputGroup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 6\n      }\n    }, \" \", this.state.title, \" \")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"inputGroup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 6\n      }\n    }, \" \", this.state.blurb, \" \")), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: index => this.props.openPostTemplate(this.props.title, this.props.blurb, this.props.image, this.props.date, this.props.paragraphs),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 5\n      }\n    }, \"Edit\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      name: this.props.num,\n      className: \"tooltip trashButton\",\n      onClick: index => this.props.removePost(this.props.num),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(FaTrashAlt, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"tooltiptext\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 9\n      }\n    }, \"Delete Post\")));\n  }\n\n}\n\nPostEditor.propTypes = {\n  num: PropTypes.number,\n  title: PropTypes.string,\n  blurb: PropTypes.string,\n  removePageObject: PropTypes.func\n};","map":{"version":3,"sources":["/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/src/App/admin/blogTemplate.js"],"names":["React","Component","axios","BackButton","UploadImage","BlogPostTemplate","FaTrashAlt","PropTypes","BlogTemplate","constructor","props","getPageData","pageId","get","params","pageType","then","response","setState","title","data","text","numPosts","posts","length","state","createPage","deleted","currentPost","onChange","bind","addPost","removePost","onSubmit","event","target","name","value","componentDidMount","console","log","values","push","paragraphs","num","keyValue","Date","getTime","numObjs","index","deletedObjs","_id","splice","i","PageData","post","alert","render","create_inputs","map","obj","image","blurb","date","backPage","addPageObject","propTypes","string","func","isRequired","PostEditor","openPostTemplate","number","removePageObject"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport { BackButton, UploadImage } from 'src/App/admin/helperComponents';\nimport BlogPostTemplate from 'src/App/admin/blogPostTemplate';\nimport { FaTrashAlt } from \"react-icons/fa\";  // Font Awesome\nimport PropTypes from \"prop-types\";\n\nexport default class BlogTemplate extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state ={\n\t\t\ttitle:\"\",\n\t\t\ttext:\"\",\n\t\t\tnumPosts:0,\n\t\t\tposts:[],\n\t\t\tcreatePage:this.props.createPage,\n\t\t\tdeleted:[],\n\t\t\tcurrentPost:null\n\t\t}\n\t\tthis.onChange=this.onChange.bind(this);\n\t\tthis.addPost=this.addPost.bind(this);\n\t\tthis.removePost=this.removePost.bind(this);\n\t\tthis.onSubmit=this.onSubmit.bind(this);\n\t}\n\n\tonChange(event){\n\t\tthis.setState({[event.target.name]:event.target.value});\n\t}\n\t\n\n\tcomponentDidMount(){\n\t\tthis.getPageData();\n\t}\n\n    getPageData = () =>{\n    \tif (this.props.pageId){\n\t        axios.get('/api/getPage', { params: {pageId: this.props.pageId, pageType:\"blog\" } })\n\t        .then((response) => {\n\t          this.setState({\n\t            title:response.data.title, \n\t            text:response.data.text,\n\t           \tnumPosts:response.data.posts.length,\n\t           \tposts:response.data.posts\n\t            });\n\t        });\n\t    }\n    }\n\n\taddPost(event){\n\t\tconsole.log(event.target);\n\t    const values = [...this.state.posts];\n\t\tvalues.push({\"title\":\"\", \"blurb\":\"\", \"image\":\"\", paragraphs:[], num:this.state.numPosts, \n\t\t\tkeyValue:new Date().getTime(), num:this.state.numObjs});\n\t\tthis.setState({posts:values}, \n\t\t\t()=>this.setState({numPosts:this.state.numPosts+1}));\n\t}\n\n\n\tremovePost(index){\n\t    const values = [...this.state.posts];\n\t    const deletedObjs = [...this.state.deleted];\n\t    deletedObjs.push(values[index]._id);\n\n\t    values.splice(index, 1);\n\t    for (var i=index; i<values.length; i++)\t{\n\t    \tvalues[i].num=values[i].num-1;\n\t    }\n\n\t   \tthis.setState({numObjs:this.state.numObjs-1},\n\t   \t\t()=>this.setState({posts:values, deleted:deletedObjs}));\n\t}\n\n\tonSubmit(){\n\t\tvar posts = this.state.posts;\n\n\t\tconst PageData={\"title\":this.state.title, \"text\":this.state.text,\n\t\t\t\"deleted\":this.state.deleted, \"id\":this.props.pageId};\n\t\tif (this.state.createPage) { \n\t\t\taxios.post('/upload/uploadBlog', PageData).then((response)=>alert(response.data));\n\t\t} else {\n\t\t\taxios.post('/edit/editBlog', PageData).then((response)=>alert(response.data));\n\t\t};\n\t\talert(\"Updated Page, refresh to see your changes\");\n\t}\n\n\trender(){\n\t\tconst create_inputs = this.state.posts.map((obj, index) => \n\t\t     \t<PostEditor key={obj._id ? obj._id : obj.keyValue} image={obj.image} num={obj.num} \n\t\t     \t\ttitle={ this.state.posts[index].title } \n\t\t     \t\tblurb={ this.state.posts[index].blurb }\n\t\t     \t\tparagraphs={ this.state.posts[index].paragraphs }\n\t\t     \t\tdate={ this.state.posts[index].date } \n\t\t     \t\tnum={ this.state.posts[index].num } \n\t\t     \t\tremovePost={ this.removePost }\n\t\t     \t/>\n\t\t     \n\t    );\n\n\t\treturn(\n\t\t\t<div className=\"pageEditor\">\n\t\t\t\t<BackButton backPage={this.props.backPage}/>\n\t\t\t\t<form className=\"pageForm\">\n\t\t\t\t\t<div className='inputGroup'>\n\t\t\t\t\t\t<label className='inputLabel' htmlFor='title'>Title:</label>\n\t\t\t\t\t\t<input type='text' className='smallPageField' name='title' \n\t\t\t\t\t\t\tvalue={this.state.title} \n\t\t\t\t\t\t\tonChange={this.onChange}/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className='inputGroup'>\n\t\t\t\t\t\t<label className='inputLabel' htmlFor='text'>Description:</label>\n\t\t\t\t\t\t<input type='text' className='smallPageField' name='text' \n\t\t\t\t\t\t\tvalue={this.state.text} \n\t\t\t\t\t\t\tonChange={this.onChange}/>\n\t\t\t\t\t</div>\n\t\t\t\t\t{ create_inputs }\n\t\t\t\t\t<button type=\"button\" className=\"button\" onClick={this.addPageObject}> \n\t\t\t\t\t\tCreate a new Post\n\t\t\t\t\t</button>\n\t\t\t\t\t<div className=\"editSubmitButtons\">\n\t\t\t\t\t\t<button type=\"button\" className=\"editSubmitButton\" onClick={this.onSubmit}> Submit </button>\n\t\t\t\t\t\t<button type=\"button\" className=\"editSubmitButton\" onClick={this.props.backPage}>\n\t\t\t\t\t\t\tCancel \n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t</div>)\n\t}\n}\n\nBlogTemplate.propTypes = {\n\tpageId:PropTypes.string,\n\tcreatePage:PropTypes.string,\n\tpageType:PropTypes.string,\n\tbackPage:PropTypes.func.isRequired\n}\n\n\nclass PostEditor extends Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state={\n\t\t\ttitle:this.props.title,\n\t\t\tblurb:this.props.blurb\n\t\t}\n\t}\n\n\trender(){\n\t\treturn(\n\t \t\t<li className=\"pageEditingObject\">\n\t \t\t\t<div className=\"inputGroup\">\n\t\t\t\t\t<div> {this.state.title} </div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"inputGroup\">\n\t\t\t\t\t<div> {this.state.blurb} </div>\n\t\t\t\t</div>\n\t\t\t\t<button type=\"button\" onClick={index=>this.props.openPostTemplate( this.props.title, this.props.blurb, this.props.image, this.props.date, this.props.paragraphs)}>\n\t\t\t    \t\tEdit\n\t\t\t\t</button>\n\t\t\t\t<button type=\"button\" name={this.props.num} className=\"tooltip trashButton\" \n\t\t\t\t\tonClick={index=>this.props.removePost(this.props.num)}>\n\t\t\t    \t<FaTrashAlt />\n\t\t\t\t    <span className=\"tooltiptext\">Delete Post</span>\n\t\t\t\t</button>\n\t\t\t</li>\n\t\t)\n\t}\n}\n\nPostEditor.propTypes = {\n\tnum:PropTypes.number,\n\ttitle:PropTypes.string,\n\tblurb:PropTypes.string,\n\tremovePageObject:PropTypes.func\n}\n"]},"metadata":{},"sourceType":"module"}