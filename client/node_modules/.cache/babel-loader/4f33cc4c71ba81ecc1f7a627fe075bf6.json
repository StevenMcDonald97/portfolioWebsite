{"ast":null,"code":"var _jsxFileName = \"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/src/App/admin/blogTemplate.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { BackButton, UploadImage } from 'src/App/admin/helperComponents';\nimport blogPostTemplate from 'src/App/admin/blogPostTemplate';\nimport { FaTrashAlt } from \"react-icons/fa\"; // Font Awesome\n\nimport PropTypes from \"prop-types\";\nexport default class BlogTemplate extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getPageData = () => {\n      if (this.props.pageId) {\n        axios.get('/api/getPage', {\n          params: {\n            pageId: this.props.pageId,\n            pageType: \"blog\"\n          }\n        }).then(response => {\n          this.setState({\n            title: response.data.title,\n            text: response.data.text,\n            numPosts: response.data.posts.length,\n            posts: response.data.posts\n          });\n        });\n      }\n    };\n\n    this.state = {\n      title: \"\",\n      text: \"\",\n      numPosts: 0,\n      posts: [],\n      createPage: this.props.createPage,\n      deleted: []\n    };\n    this.onChange = this.onChange.bind(this);\n    this.getBlogData = this.getBlogData.bind(this);\n    this.addPost = this.addPost.bind(this);\n    this.removePost = this.removePost.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  onChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  componentDidMount() {\n    this.getPageData();\n  }\n\n  addPost(event) {\n    const values = [...this.state.listObjects];\n    values.push({\n      \"title\": \"\",\n      \"blurb\": \"\",\n      \"imgName\": \"\",\n      paragraphs: [],\n      num: this.state.numPosts,\n      keyValue: new Date().getTime(),\n      num: this.state.numObjs\n    });\n    this.setState({\n      listObjects: values\n    }, () => this.setState({\n      numPosts: this.state.numPosts + 1\n    }));\n  }\n\n  removePost(index) {\n    const values = [...this.state.posts];\n    const deletedObjs = [...this.state.deleted];\n    deletedObjs.push(values[index]._id);\n    values.splice(index, 1);\n\n    for (var i = index; i < values.length; i++) {\n      values[i].num = values[i].num - 1;\n    }\n\n    this.setState({\n      numObjs: this.state.numObjs - 1\n    }, () => this.setState({\n      posts: values,\n      deleted: deletedObjs\n    }));\n  }\n\n  onSubmit() {\n    var posts = this.state.posts;\n    const PageData = {\n      \"title\": this.state.title,\n      \"text\": this.state.text,\n      \"deleted\": this.state.deleted,\n      \"id\": this.props.pageId\n    };\n\n    if (this.state.createPage) {\n      axios.post('/upload/uploadBlog', PageData).then(response => alert(response.data));\n    } else {\n      axios.post('/edit/editBlog', PageData).then(response => alert(response.data));\n    }\n\n    ;\n    alert(\"Updated Page, refresh to see your changes\");\n  }\n\n  render() {\n    const create_inputs = this.state.posts.map((obj, index) => /*#__PURE__*/React.createElement(PostEditor, {\n      key: obj._id ? obj._id : obj.keyValue,\n      image: obj.imgName,\n      num: obj.num,\n      title: this.state.posts[index].title,\n      blurb: this.state.posts[index].blurb,\n      description: this.state.listObjects[index].description,\n      date: this.state.posts[index].date,\n      num: this.state.posts[index].num,\n      removePageObject: this.removePageObject,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }\n    }));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pageEditor\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(BackButton, {\n      backPage: this.props.backPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 4\n      }\n    }), /*#__PURE__*/React.createElement(\"form\", {\n      className: \"pageForm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"inputGroup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"inputLabel\",\n      htmlFor: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 6\n      }\n    }, \"Title:\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"smallPageField\",\n      name: \"title\",\n      value: this.state.title,\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 6\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"inputGroup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"inputLabel\",\n      htmlFor: \"text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 6\n      }\n    }, \"Description:\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"smallPageField\",\n      name: \"text\",\n      value: this.state.text,\n      onChange: this.onChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 6\n      }\n    })), create_inputs, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"button\",\n      onClick: this.addPageObject,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 5\n      }\n    }, \"Create a new Post\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"editSubmitButtons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"editSubmitButton\",\n      onClick: this.onSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 6\n      }\n    }, \" Submit \"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"editSubmitButton\",\n      onClick: this.props.backPage,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 6\n      }\n    }, \"Cancel\"))));\n  }\n\n}\nBlogTemplate.propTypes = {\n  pageId: PropTypes.string,\n  createPage: PropTypes.string,\n  pageType: PropTypes.string,\n  backPage: PropTypes.func.isRequired\n};\n\nclass PostEditor extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      title: this.props.title,\n      blurb: this.props.blurb\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      className: \"pageEditingObject\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"inputGroup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 6\n      }\n    }, \" \", this.state.title, \" \")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"inputGroup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 6\n      }\n    }, \" \", this.state.blurb, \" \")), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      name: this.props.num,\n      className: \"tooltip trashButton\",\n      onClick: index => this.props.removePageObject(this.props.num),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(FaTrashAlt, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"tooltiptext\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 9\n      }\n    }, \"Delete Post\")));\n  }\n\n}\n\nPostEditor.propTypes = {\n  num: PropTypes.number,\n  title: PropTypes.string,\n  blurb: PropTypes.string,\n  removePageObject: PropTypes.func\n};","map":{"version":3,"sources":["/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/src/App/admin/blogTemplate.js"],"names":["React","Component","axios","BackButton","UploadImage","blogPostTemplate","FaTrashAlt","PropTypes","BlogTemplate","constructor","props","getPageData","pageId","get","params","pageType","then","response","setState","title","data","text","numPosts","posts","length","state","createPage","deleted","onChange","bind","getBlogData","addPost","removePost","onSubmit","event","target","name","value","componentDidMount","values","listObjects","push","paragraphs","num","keyValue","Date","getTime","numObjs","index","deletedObjs","_id","splice","i","PageData","post","alert","render","create_inputs","map","obj","imgName","blurb","description","date","removePageObject","backPage","addPageObject","propTypes","string","func","isRequired","PostEditor","number"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport { BackButton, UploadImage } from 'src/App/admin/helperComponents';\nimport blogPostTemplate from 'src/App/admin/blogPostTemplate';\nimport { FaTrashAlt } from \"react-icons/fa\";  // Font Awesome\nimport PropTypes from \"prop-types\";\n\nexport default class BlogTemplate extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state ={\n\t\t\ttitle:\"\",\n\t\t\ttext:\"\",\n\t\t\tnumPosts:0,\n\t\t\tposts:[],\n\t\t\tcreatePage:this.props.createPage,\n\t\t\tdeleted:[]\n\t\t}\n\t\tthis.onChange=this.onChange.bind(this);\n\t\tthis.getBlogData=this.getBlogData.bind(this);\n\t\tthis.addPost=this.addPost.bind(this);\n\t\tthis.removePost=this.removePost.bind(this);\n\t\tthis.onSubmit=this.onSubmit.bind(this);\n\t}\n\n\tonChange(event){\n\t\tthis.setState({[event.target.name]:event.target.value});\n\t}\n\t\n\n\tcomponentDidMount(){\n\t\tthis.getPageData();\n\t}\n\n    getPageData = () =>{\n    \tif (this.props.pageId){\n\t        axios.get('/api/getPage', { params: {pageId: this.props.pageId, pageType:\"blog\" } })\n\t        .then((response) => {\n\t          this.setState({\n\t            title:response.data.title, \n\t            text:response.data.text,\n\t           \tnumPosts:response.data.posts.length,\n\t           \tposts:response.data.posts\n\t            });\n\t        });\n\t    }\n    }\n\n\taddPost(event){\n\t    const values = [...this.state.listObjects];\n\t\tvalues.push({\"title\":\"\", \"blurb\":\"\", \"imgName\":\"\", paragraphs:[], num:this.state.numPosts, \n\t\t\tkeyValue:new Date().getTime(), num:this.state.numObjs});\n\t\tthis.setState({listObjects:values}, \n\t\t\t()=>this.setState({numPosts:this.state.numPosts+1}));\n\t}\n\n\n\tremovePost(index){\n\t    const values = [...this.state.posts];\n\t    const deletedObjs = [...this.state.deleted];\n\t    deletedObjs.push(values[index]._id);\n\n\t    values.splice(index, 1);\n\t    for (var i=index; i<values.length; i++)\t{\n\t    \tvalues[i].num=values[i].num-1;\n\t    }\n\n\t   \tthis.setState({numObjs:this.state.numObjs-1},\n\t   \t\t()=>this.setState({posts:values, deleted:deletedObjs}));\n\t}\n\n\tonSubmit(){\n\t\tvar posts = this.state.posts;\n\n\t\tconst PageData={\"title\":this.state.title, \"text\":this.state.text,\n\t\t\t\"deleted\":this.state.deleted, \"id\":this.props.pageId};\n\t\tif (this.state.createPage) { \n\t\t\taxios.post('/upload/uploadBlog', PageData).then((response)=>alert(response.data));\n\t\t} else {\n\t\t\taxios.post('/edit/editBlog', PageData).then((response)=>alert(response.data));\n\t\t};\n\t\talert(\"Updated Page, refresh to see your changes\");\n\t}\n\n\trender(){\n\t\tconst create_inputs = this.state.posts.map((obj, index) => \n\t\t     \t<PostEditor key={obj._id ? obj._id : obj.keyValue} image={obj.imgName} num={obj.num} \n\t\t     \t\ttitle={ this.state.posts[index].title } \n\t\t     \t\tblurb={ this.state.posts[index].blurb }\n\t\t     \t\tdescription={ this.state.listObjects[index].description }\n\t\t     \t\tdate={ this.state.posts[index].date } \n\t\t     \t\tnum={ this.state.posts[index].num } \n\t\t     \t\tremovePageObject={ this.removePageObject }\n\t\t     \t/>\n\t\t     \n\t    );\n\n\t\treturn(\n\t\t<div className=\"pageEditor\">\n\t\t\t<BackButton backPage={this.props.backPage}/>\n\t\t\t<form className=\"pageForm\">\n\t\t\t\t<div className='inputGroup'>\n\t\t\t\t\t<label className='inputLabel' htmlFor='title'>Title:</label>\n\t\t\t\t\t<input type='text' className='smallPageField' name='title' \n\t\t\t\t\t\tvalue={this.state.title} \n\t\t\t\t\t\tonChange={this.onChange}/>\n\t\t\t\t</div>\n\t\t\t\t<div className='inputGroup'>\n\t\t\t\t\t<label className='inputLabel' htmlFor='text'>Description:</label>\n\t\t\t\t\t<input type='text' className='smallPageField' name='text' \n\t\t\t\t\t\tvalue={this.state.text} \n\t\t\t\t\t\tonChange={this.onChange}/>\n\t\t\t\t</div>\n\t\t\t\t{ create_inputs }\n\t\t\t\t<button type=\"button\" className=\"button\" onClick={this.addPageObject}> \n\t\t\t\t\tCreate a new Post\n\t\t\t\t</button>\n\t\t\t\t<div className=\"editSubmitButtons\">\n\t\t\t\t\t<button type=\"button\" className=\"editSubmitButton\" onClick={this.onSubmit}> Submit </button>\n\t\t\t\t\t<button type=\"button\" className=\"editSubmitButton\" onClick={this.props.backPage}>\n\t\t\t\t\t\tCancel \n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t</div>)\n\t}\n}\n\nBlogTemplate.propTypes = {\n\tpageId:PropTypes.string,\n\tcreatePage:PropTypes.string,\n\tpageType:PropTypes.string,\n\tbackPage:PropTypes.func.isRequired\n}\n\n\nclass PostEditor extends Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state={\n\t\t\ttitle:this.props.title,\n\t\t\tblurb:this.props.blurb\n\t\t}\n\t}\n\n\trender(){\n\t\treturn(\n\t \t\t<li className=\"pageEditingObject\">\n\t \t\t\t<div className=\"inputGroup\">\n\t\t\t\t\t<div> {this.state.title} </div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"inputGroup\">\n\t\t\t\t\t<div> {this.state.blurb} </div>\n\t\t\t\t</div>\n\t\t\t\t<button type=\"button\" name={this.props.num} className=\"tooltip trashButton\" \n\t\t\t\t\tonClick={index=>this.props.removePageObject(this.props.num)}>\n\t\t\t    \t<FaTrashAlt />\n\t\t\t\t    <span className=\"tooltiptext\">Delete Post</span>\n\t\t\t\t</button>\n\t\t\t</li>\n\t\t)\n\t}\n}\n\nPostEditor.propTypes = {\n\tnum:PropTypes.number,\n\ttitle:PropTypes.string,\n\tblurb:PropTypes.string,\n\tremovePageObject:PropTypes.func\n}\n"]},"metadata":{},"sourceType":"module"}