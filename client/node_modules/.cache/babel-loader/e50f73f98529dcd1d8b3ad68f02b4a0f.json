{"ast":null,"code":"import _classCallCheck from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";// based on tutorial here: https://codeburst.io/image-uploading-using-react-and-node-to-get-the-images-up-c46ec11a7129\nimport React,{Component}from'react';import axios from'axios';import ImageEditor from\"App/admin/imageEditor\";import ErrorBoundary from'App/errorBoundary';import{BackButton}from'App/admin/helperComponents';import{FaArrowDown}from\"react-icons/fa\";var Contact=/*#__PURE__*/function(_Component){_inherits(Contact,_Component);var _super=_createSuper(Contact);function Contact(props){var _this;_classCallCheck(this,Contact);_this=_super.call(this,props);_this.addImage=function(link,fileName){var urls=_this.state.imgURLs;urls.push(link);_this.setState({imgURLs:urls});var values=_this.state.imageData;values.push({fileName:fileName,title:fileName,date:'',size:'',medium:'',availability:'',price:'',portfolio:'',isChanged:true});_this.setState({imageData:values},function(){if(_this.state.imageData.length===_this.state.selectedFiles.length){_this.setState({filesChosen:true});}});};_this.removeImage=function(index){var files=_this.state.selectedFiles;files.splice(index,1);_this.setState({selectedFiles:files});};_this.state={filesChosen:false,selectedFiles:[],imageData:[],imgURLs:[]};_this.createImages=_this.createImages.bind(_assertThisInitialized(_this));_this.removeImage=_this.removeImage.bind(_assertThisInitialized(_this));_this.uploadImages=_this.uploadImages.bind(_assertThisInitialized(_this));_this.returnToUserPanel=_this.returnToUserPanel.bind(_assertThisInitialized(_this));return _this;}_createClass(Contact,[{key:\"shouldComponentUpdate\",value:function shouldComponentUpdate(){if(this.state.filesChosen){return false;}else{return true;}}},{key:\"returnToUserPanel\",value:function returnToUserPanel(){this.props.history.push('/userPanel');}},{key:\"createImages\",value:function createImages(e){var _this2=this;this.setState({selectedFiles:Array.from(e.target.files)},function(){for(var i=0;i<_this2.state.selectedFiles.length;i++){_this2.addImage(URL.createObjectURL(_this2.state.selectedFiles[i]),_this2.state.selectedFiles[i].name);}});}},{key:\"uploadImages\",value:function uploadImages(images){var data=new FormData();for(var x=0;x<this.state.selectedFiles.length;x++){data.append('file',this.state.selectedFiles[x]);}axios.post(\"/upload/uploadImages\",data,{// receive two    parameter endpoint url ,form data\n}).then(function(res){// then print response status\nconsole.log(\"Image upload returned: \".concat(res.statusText));axios.post(\"/upload/storeImagesInDB\",images,{// receive two    parameter endpoint url ,form data\n}).then(function(res){// then print response status\nconsole.log(\"Storing images in database returned: \".concat(res.statusText));}).catch(function(err){return console.log(\"Storing images in database returned the error: \"+err);});}).catch(function(err){alert(\"Uploading these images caused a problem. This is likely because your image size is too large. Image max size is 4mb\");console.log(\"Uploading images returned the error: \"+err);});}},{key:\"render\",value:function render(){var _this3=this;if(this.state.filesChosen){return/*#__PURE__*/React.createElement(ErrorBoundary,null,/*#__PURE__*/React.createElement(ImageEditor,Object.assign({imageURLs:this.state.imgURLs,images:this.state.imageData,removeImageFromParent:this.removeImage,backPage:function backPage(){return _this3.props.history.push('/userPanel');},onSubmit:this.uploadImages},this.props)));}else{return/*#__PURE__*/React.createElement(\"div\",{className:\"pageEditor main-upload-container\"},/*#__PURE__*/React.createElement(BackButton,{backPage:this.returnToUserPanel}),/*#__PURE__*/React.createElement(\"div\",{className:\"imageUploadContainer\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"pageHeader\"},\" Upload Image(s) \"),/*#__PURE__*/React.createElement(\"div\",{name:\"imageUploader\",className:\"imageUploader\"},/*#__PURE__*/React.createElement(\"input\",{type:\"file\",className:\"form-control\",onChange:this.createImages,multiple:true})),/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"imageUploader\"},\" \",/*#__PURE__*/React.createElement(FaArrowDown,{className:\"uploadArrow\"}))));}}}]);return Contact;}(Component);export{Contact as default};","map":{"version":3,"sources":["/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/src/App/admin/uploadImages.js"],"names":["React","Component","axios","ImageEditor","ErrorBoundary","BackButton","FaArrowDown","Contact","props","addImage","link","fileName","urls","state","imgURLs","push","setState","values","imageData","title","date","size","medium","availability","price","portfolio","isChanged","length","selectedFiles","filesChosen","removeImage","index","files","splice","createImages","bind","uploadImages","returnToUserPanel","history","e","Array","from","target","i","URL","createObjectURL","name","images","data","FormData","x","append","post","then","res","console","log","statusText","catch","err","alert"],"mappings":"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","sourcesContent":["// based on tutorial here: https://codeburst.io/image-uploading-using-react-and-node-to-get-the-images-up-c46ec11a7129\nimport React, { Component} from 'react';\nimport axios from 'axios';\nimport ImageEditor from \"App/admin/imageEditor\";\nimport ErrorBoundary from 'App/errorBoundary';\nimport { BackButton } from 'App/admin/helperComponents';\nimport {FaArrowDown} from \"react-icons/fa\";\n\nexport default class Contact extends Component {\n  constructor(props) {\n\t\tsuper(props);\n    this.state ={\n      filesChosen:false,\n      selectedFiles: [],\n      imageData:[],\n      imgURLs:[]\n    };\n    this.createImages = this.createImages.bind(this);\n    this.removeImage = this.removeImage.bind(this);\n    this.uploadImages = this.uploadImages.bind(this);\n    this.returnToUserPanel=this.returnToUserPanel.bind(this);\n  }\n\n  shouldComponentUpdate () {\n    if(this.state.filesChosen){\n      return false \n    } else {\n      return true\n    }\n  }\n\n  returnToUserPanel(){\n    this.props.history.push('/userPanel');\n  }\n\n  createImages(e) {\n    this.setState({\n      selectedFiles: Array.from(e.target.files),\n    }, ()=> { \n      for (let i =0; i<this.state.selectedFiles.length;i++){\n        this.addImage(URL.createObjectURL(this.state.selectedFiles[i]), this.state.selectedFiles[i].name);\n      }\n    });\n  }\n\n  addImage = (link, fileName) => {\n    let urls=this.state.imgURLs;\n    urls.push(link);\n    this.setState({imgURLs: urls})\n      const values = this.state.imageData;\n      values.push({\n          fileName:fileName,\n          title:fileName,\n          date:'',\n          size:'',\n          medium:'',\n          availability:'',\n          price:'',\n          portfolio:'',\n          isChanged:true,\n        });\n\n      this.setState({imageData:values}, ()=>{\n        if (this.state.imageData.length===this.state.selectedFiles.length) {\n          this.setState({filesChosen:true});\n        }\n      });\n  };\n\n  removeImage = (index) => {\n    let files = this.state.selectedFiles;\n    files.splice(index, 1);\n    this.setState({selectedFiles:files});\n  };\n\n  uploadImages(images) {\n    const data = new FormData();\n    for(var x = 0; x<this.state.selectedFiles.length; x++) {\n        data.append('file', this.state.selectedFiles[x])\n    }\n\n    axios.post(\"/upload/uploadImages\", data, { \n          // receive two    parameter endpoint url ,form data\n    }).then(res => { // then print response status\n      console.log(`Image upload returned: ${res.statusText}`)\n      axios.post(\"/upload/storeImagesInDB\", images, { \n            // receive two    parameter endpoint url ,form data\n      }).then(res => { // then print response status\n          console.log(`Storing images in database returned: ${res.statusText}`)\n      }).catch(err => console.log(\"Storing images in database returned the error: \"+err));\n\n    }).catch(err => {alert(\"Uploading these images caused a problem. This is likely because your image size is too large. Image max size is 4mb\"); console.log(\"Uploading images returned the error: \"+err)});\n\n  }\n\n  render(){\n    if(this.state.filesChosen)\n    {\n      return(        \n        <ErrorBoundary >\n          <ImageEditor imageURLs={this.state.imgURLs} \n            images={this.state.imageData} \n            removeImageFromParent={this.removeImage} \n            backPage={()=>this.props.history.push('/userPanel')}\n            onSubmit={this.uploadImages}\n            {...this.props}/>\n        </ErrorBoundary>\n      )\n    } else {\n      return(\n        <div className=\"pageEditor main-upload-container\"> \n          <BackButton backPage={this.returnToUserPanel}/>\n          <div className=\"imageUploadContainer\">\n            <h3 className=\"pageHeader\"> Upload Image(s) </h3>\n            <div name=\"imageUploader\" className=\"imageUploader\">\n                <input type=\"file\" className=\"form-control\" onChange={this.createImages} multiple />\n            </div>\n            <label htmlFor=\"imageUploader\"> <FaArrowDown className=\"uploadArrow\"/></label>\n          </div>\n        </div>\n      )\n    }\n  }\n }\n\n"]},"metadata":{},"sourceType":"module"}