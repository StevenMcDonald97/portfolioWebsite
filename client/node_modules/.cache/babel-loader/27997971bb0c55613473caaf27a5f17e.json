{"ast":null,"code":"import _objectSpread from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import{BackButton}from'App/admin/helperComponents';import{FaSortUp,FaSortDown,FaTrashAlt}from\"react-icons/fa\";// Font Awesome\nvar layoutJson=require('App/layout.json');var EditLayout=/*#__PURE__*/function(_Component){_inherits(EditLayout,_Component);var _super=_createSuper(EditLayout);function EditLayout(props){var _this;_classCallCheck(this,EditLayout);_this=_super.call(this,props);_this.handleChange=function(event){_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.state={menuStyle:layoutJson.menuStyle,headerAlignment:layoutJson.headerAlignment,portfolioStyle:layoutJson.portfolioStyle,pages:[],deletedLinks:[],numberOfLinks:0};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.addLink=_this.addLink.bind(_assertThisInitialized(_this));_this.removeLink=_this.removeLink.bind(_assertThisInitialized(_this));_this.changePageState=_this.changePageState.bind(_assertThisInitialized(_this));_this.changeLinkOrder=_this.changeLinkOrder.bind(_assertThisInitialized(_this));_this.returnToUserPanel=_this.returnToUserPanel.bind(_assertThisInitialized(_this));_this.onSubmit=_this.onSubmit.bind(_assertThisInitialized(_this));return _this;}// need to load a sorted array of page links\n_createClass(EditLayout,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get('/api/getPageInfo').then(function(response){var orderedPages=response.data.sort(function(page1,page2){var key1=page1.index,key2=page2.index;// Compare the 2 dates\nif(key1<key2)return-1;if(key1>key2)return 1;return 0;});_this2.setState({pages:orderedPages,numberOfLinks:orderedPages.length});});}},{key:\"createNewLink\",value:function createNewLink(){var values=_toConsumableArray(this.state.pages);values.push({title:\"Link \".concat(this.state.numberOfLinks),type:\"parent\",visible:true,children:[],index:this.state.numberOfLinks});this.setState({pages:values,numberOfLinks:this.state.numberOfLinks+1});}},{key:\"addLink\",value:function addLink(title,children){var values=_toConsumableArray(this.state.pages);values.push({title:title,type:\"parent\",visible:true,children:children,index:this.state.numberOfLinks});children.forEach(function(childId){for(var i=0;i<values.length;i++){if(values[i]._id===childId){values[i].parent=title;}}});this.setState({pages:values,numberOfLinks:this.state.numberOfLinks+1});}},{key:\"removeLink\",value:function removeLink(index){var values=_toConsumableArray(this.state.pages);var title=values[index].title;if(values[index]._id){var deleted=_toConsumableArray(this.state.deletedLinks);deleted.push(values[index]._id);this.setState({deletedLinks:deleted});}for(var i=0;i<values.length;i++){values[i].index=values[i].index-1;if(values[i].parent===title)values[i].parent=null;}values.splice(index,1);this.setState({pages:values,numberOfLinks:this.state.numberOfLinks-1});}},{key:\"changePageState\",value:function changePageState(index,key,value){var values=_toConsumableArray(this.state.pages);values[index][key]=value;this.setState({pages:values});}},{key:\"changeLinkOrder\",value:function changeLinkOrder(direction,index){var newPages=_toConsumableArray(this.state.pages);if(direction===\"up\"&&index>0){newPages[index].index=index-1;newPages[index-1].index=index;}else if(direction===\"down\"&&index<this.state.pages.length-1){newPages[index].index=index+1;newPages[index+1].index=index;}newPages.sort(function(page1,page2){var key1=page1.index,key2=page2.index;// Compare the 2 dates\nif(key1<key2)return-1;if(key1>key2)return 1;return 0;});this.setState({pages:newPages});}},{key:\"returnToUserPanel\",value:function returnToUserPanel(){this.props.history.push('/userPanel');}},{key:\"onSubmit\",value:function onSubmit(){var children={};if(this.state.pages){this.state.pages.forEach(function(page){if(page.parent){children[page.parent]?children[page.parent].push(page._id):children[page.parent]=[page._id];}});}var LinkData={\"headerAlignment\":this.state.headerAlignment,\"menuStyle\":this.state.menuStyle,\"portfolioStyle\":this.state.portfolioStyle,\"pages\":this.state.pages};axios.post(\"/edit/updateLinks\",LinkData).then(function(response){return alert(\"Link updating returned:\"+response.data);});axios.post(\"/remove/removeLinks\",this.state.deletedLinks).then(function(response){return alert(response.data);});}},{key:\"render\",value:function render(){var _this3=this;var createLinks=this.state.pages.map(function(page){return/*#__PURE__*/React.createElement(\"li\",{key:page.title,className:\"linkEditingContainer\"},/*#__PURE__*/React.createElement(LinkEditingObject,{index:page.index,title:page.title,type:page.type,changeParentState:_this3.changePageState,changeOrder:_this3.changeLinkOrder,removeLink:_this3.removeLink}));});return/*#__PURE__*/React.createElement(\"div\",{className:\"pageEditor\"},/*#__PURE__*/React.createElement(BackButton,{backPage:this.returnToUserPanel}),/*#__PURE__*/React.createElement(\"div\",{className:\"inputGroup\"},/*#__PURE__*/React.createElement(\"label\",{className:\"inputLabel home\",htmlFor:\"menuStyle\"},\"Choose your navigation style:\"),/*#__PURE__*/React.createElement(\"select\",{name:\"menuStyle\",className:\"homePageSelect\",value:this.state.menuStyle,onChange:this.handleChange},/*#__PURE__*/React.createElement(\"option\",{value:\"top\"},\"Top Bar\"),/*#__PURE__*/React.createElement(\"option\",{value:\"dropdown\"},\"Dropdown Menu\"),/*#__PURE__*/React.createElement(\"option\",{value:\"sidebar\"},\"Sidebar Menu\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"inputGroup\"},/*#__PURE__*/React.createElement(\"label\",{className:\"inputLabel home\",htmlFor:\"headerAlignment\"},\"Choose your website title orientation:\"),/*#__PURE__*/React.createElement(\"select\",{name:\"headerAlignment\",className:\"homePageSelect\",value:this.state.headerAlignment,onChange:this.handleChange},/*#__PURE__*/React.createElement(\"option\",{value:\"left\"},\"Left\"),/*#__PURE__*/React.createElement(\"option\",{value:\"center\"},\"Center\"),/*#__PURE__*/React.createElement(\"option\",{value:\"right\"},\"Right\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"inputGroup\"},/*#__PURE__*/React.createElement(\"label\",{className:\"inputLabel home\",htmlFor:\"type\"},\"Choose your portfolio style:\"),/*#__PURE__*/React.createElement(\"select\",{name:\"portfolioStyle\",className:\"homePageSelect\",value:this.state.portfolioStyle,onChange:this.handleChange},/*#__PURE__*/React.createElement(\"option\",{value:\"grid\"},\"Grid\"),/*#__PURE__*/React.createElement(\"option\",{value:\"list\"},\"List\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"linkEditing\"},/*#__PURE__*/React.createElement(\"h3\",null,\"You can edit the visibility and order of your menu links below\"),createLinks),this.state.pages.length>0?/*#__PURE__*/React.createElement(ParentLinkObject,{pages:this.state.pages,addLink:this.addLink}):/*#__PURE__*/React.createElement(\"span\",null,\"Loading link adder...\"),/*#__PURE__*/React.createElement(\"div\",{className:\"layoutSubmitButtons\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"layoutSubmitButton\",onClick:this.onSubmit},\"Submit Changes\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"layoutSubmitButton\",onClick:this.returnToUserPanel},\"Cancel\")));}}]);return EditLayout;}(Component);// represents a conntainer with all the fields for editing a link\nexport{EditLayout as default};var LinkEditingObject=/*#__PURE__*/function(_Component2){_inherits(LinkEditingObject,_Component2);var _super2=_createSuper(LinkEditingObject);function LinkEditingObject(props){var _this4;_classCallCheck(this,LinkEditingObject);_this4=_super2.call(this,props);_this4.handleChange=function(event){_this4.setState(_defineProperty({},event.target.name,event.target.value));_this4.props.changeParentState(_this4.props.index,event.target.name,event.target.value);};_this4.state={visibility:\"visible\"};_this4.handleChange=_this4.handleChange.bind(_assertThisInitialized(_this4));_this4.incrementLinkOrder=_this4.incrementLinkOrder.bind(_assertThisInitialized(_this4));_this4.decrementLinkOrder=_this4.decrementLinkOrder.bind(_assertThisInitialized(_this4));_this4.removeLink=_this4.removeLink.bind(_assertThisInitialized(_this4));return _this4;}_createClass(LinkEditingObject,[{key:\"decrementLinkOrder\",value:function decrementLinkOrder(){this.props.changeOrder(\"up\",this.props.index);}},{key:\"incrementLinkOrder\",value:function incrementLinkOrder(){this.props.changeOrder(\"down\",this.props.index);}},{key:\"removeLink\",value:function removeLink(){this.props.removeLink(this.props.index);}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"linkEditingField\"},\" \",this.props.title,\" \"),/*#__PURE__*/React.createElement(\"select\",{name:\"visibility\",className:\"homePageSelect linkEditingField\",value:this.state.type,onChange:this.handleChange},/*#__PURE__*/React.createElement(\"option\",{value:\"visible\"},\"Visible\"),/*#__PURE__*/React.createElement(\"option\",{value:\"notVisible\"},\"Not Visible\")),/*#__PURE__*/React.createElement(\"div\",{className:\"linkEditingField linkOrderArrows\"},/*#__PURE__*/React.createElement(\"div\",{className:\"upArrow\",name:\"up\",onClick:this.decrementLinkOrder},/*#__PURE__*/React.createElement(FaSortUp,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"downArrow\",name:\"down\",onClick:this.incrementLinkOrder},/*#__PURE__*/React.createElement(FaSortDown,null))),this.props.type===\"parent\"?/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"linkEditingField tooltip trashButton\",onClick:this.removeLink},/*#__PURE__*/React.createElement(FaTrashAlt,null),/*#__PURE__*/React.createElement(\"span\",{className:\"tooltiptext\"},\"Remove this Link\")):null);}}]);return LinkEditingObject;}(Component);// class for creating a parent link and giving it children. When children are added to its children list\n// the respective children have their parent fields changed\n// first create link, then when they click \"create\" add it to the list \nvar ParentLinkObject=/*#__PURE__*/function(_Component3){_inherits(ParentLinkObject,_Component3);var _super3=_createSuper(ParentLinkObject);function ParentLinkObject(props){var _this5;_classCallCheck(this,ParentLinkObject);_this5=_super3.call(this,props);_this5.handleChange=function(event){if(event){_this5.setState(_defineProperty({},event.target.name,event.target.value));}};_this5.handleCheckboxChange=function(event){var name=event.target.name;_this5.setState(function(prevState){return{checkboxes:_objectSpread(_objectSpread({},prevState.checkboxes),{},_defineProperty({},name,!prevState.checkboxes[name]))};});};_this5.createCheckbox=function(page){if(page.type!==\"parent\"){return/*#__PURE__*/React.createElement(Checkbox,{key:page._id,label:page.title,name:page._id,isSelected:_this5.state.checkboxes[page._id],onCheckboxChange:_this5.handleCheckboxChange});}return null;};_this5.createCheckboxes=function(){return _this5.props.pages.map(_this5.createCheckbox);};_this5.state={title:\"\",checkboxes:props.pages.reduce(function(pages,page){return _objectSpread(_objectSpread({},pages),{},_defineProperty({},page._id,false));},{})};_this5.handleCheckboxChange=_this5.handleCheckboxChange.bind(_assertThisInitialized(_this5));_this5.handleChange=_this5.handleChange.bind(_assertThisInitialized(_this5));_this5.createCheckbox=_this5.createCheckbox.bind(_assertThisInitialized(_this5));_this5.createCheckboxes=_this5.createCheckboxes.bind(_assertThisInitialized(_this5));_this5.addLink=_this5.addLink.bind(_assertThisInitialized(_this5));_this5.clear=_this5.clear.bind(_assertThisInitialized(_this5));return _this5;}_createClass(ParentLinkObject,[{key:\"addLink\",value:function addLink(){var _this6=this;if(this.state.title!==\"\"){var children=Object.keys(this.state.checkboxes).filter(function(key){return _this6.state.checkboxes[key];});this.props.addLink(this.state.title,children);this.clear();}}},{key:\"clear\",value:function clear(){var clearedCheckBoxes=this.state.checkboxes;Object.keys(clearedCheckBoxes).forEach(function(key){return clearedCheckBoxes[key]=false;});this.setState({title:\"\",checkboxes:clearedCheckBoxes});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"parentLinkContainer\"},/*#__PURE__*/React.createElement(\"h3\",null,\" Create a New Parent Link \"),/*#__PURE__*/React.createElement(\"h5\",null,\" (For example if you want several portfolios to dropdown under one link) \"),/*#__PURE__*/React.createElement(\"label\",{className:\"inputLabel\",htmlFor:\"title\"},\"Title:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"smallPageField\",name:\"title\",value:this.state.title,onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"label\",{className:\"inputLabel\",htmlFor:\"children\"},\"Choose children pages:\"),/*#__PURE__*/React.createElement(\"div\",{name:\"children\",className:\"childLinkSelection\"},this.createCheckboxes()),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"layoutSubmitButton\",onClick:this.addLink},\"Add Link\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"layoutSubmitButton\",onClick:this.clear},\"Cancel\"));}}]);return ParentLinkObject;}(Component);// <div className=\"linkOrderArrows\">\n// \t<div className=\"upArrow\" name=\"up\" onClick={this.decrementLinkOrder}><FaSortUp/></div>\n// \t<div className=\"downArrow\" name=\"down\" onClick={this.incrementLinkOrder}><FaSortDown/></div>\n// </div>\n// <button type=\"button\" className=\"tooltip trashButton\" \n// \tonClick={this.removeLink}>\n//    \t<FaTrashAlt />\n//     <span className=\"tooltiptext\">Remove this Link</span>\n// </button>\n// <button type=\"button\" className=\"tooltip\" \n// \tonClick={this.decrementLinkOrder}>\n//    \t<FaSortUp/>\n//     <span className=\"tooltiptext\">Move link up</span>\n// </button>\n// <button type=\"button\" className=\"tooltip trashButton\" \n// \tonClick={this.incrementLinkOrder}>\n//    \t<FaSortDown/>\n//     <span className=\"tooltiptext\">Move link up</span>\n// </button>\n// taken from: http://react.tips/checkboxes-in-react-16/\nvar Checkbox=function Checkbox(_ref){var label=_ref.label,name=_ref.name,isSelected=_ref.isSelected,onCheckboxChange=_ref.onCheckboxChange;return/*#__PURE__*/React.createElement(\"div\",{className:\"childLinkCheckbox\"},/*#__PURE__*/React.createElement(\"label\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",name:name,checked:isSelected,onChange:onCheckboxChange,className:\"form-check-input\"}),label));};","map":{"version":3,"sources":["/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/src/App/admin/editLayout.js"],"names":["React","Component","axios","BackButton","FaSortUp","FaSortDown","FaTrashAlt","layoutJson","require","EditLayout","props","handleChange","event","setState","target","name","value","state","menuStyle","headerAlignment","portfolioStyle","pages","deletedLinks","numberOfLinks","bind","addLink","removeLink","changePageState","changeLinkOrder","returnToUserPanel","onSubmit","get","then","response","orderedPages","data","sort","page1","page2","key1","index","key2","length","values","push","title","type","visible","children","forEach","childId","i","_id","parent","deleted","splice","key","direction","newPages","history","page","LinkData","post","alert","createLinks","map","LinkEditingObject","changeParentState","visibility","incrementLinkOrder","decrementLinkOrder","changeOrder","ParentLinkObject","handleCheckboxChange","prevState","checkboxes","createCheckbox","createCheckboxes","reduce","clear","Object","keys","filter","clearedCheckBoxes","Checkbox","label","isSelected","onCheckboxChange"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport { BackButton } from 'App/admin/helperComponents';\nimport { FaSortUp, FaSortDown, FaTrashAlt } from \"react-icons/fa\";  // Font Awesome\nconst layoutJson = require('App/layout.json');\n\nexport default class EditLayout extends Component{\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state ={\n\t\t\tmenuStyle:layoutJson.menuStyle,\n\t\t\theaderAlignment:layoutJson.headerAlignment,\n\t\t\tportfolioStyle:layoutJson.portfolioStyle,\n\t\t\tpages:[],\n\t\t\tdeletedLinks:[],\n\t\t\tnumberOfLinks:0\n\t\t}\n\t\tthis.handleChange=this.handleChange.bind(this);\n\t\tthis.addLink=this.addLink.bind(this);\n\t\tthis.removeLink=this.removeLink.bind(this);\n\t\tthis.changePageState=this.changePageState.bind(this);\n\t\tthis.changeLinkOrder=this.changeLinkOrder.bind(this);\n    \tthis.returnToUserPanel=this.returnToUserPanel.bind(this);\n\t\tthis.onSubmit=this.onSubmit.bind(this);\n\t}\n\n\t// need to load a sorted array of page links\n\tcomponentDidMount(){\n\t\taxios.get('/api/getPageInfo').then((response) => {\n\t     let orderedPages=response.data.sort(function(page1, page2) {\n\t\t\t  var key1 = (page1.index),\n\t\t\t    key2 = (page2.index);\n\t\t\t  // Compare the 2 dates\n\t\t\t  if (key1 < key2) return -1;\n\t\t\t  if (key1 > key2) return 1;\n\t\t\t  return 0;\n\t\t\t});\n\t\t\tthis.setState({pages:orderedPages, numberOfLinks:orderedPages.length});\n\t\t});\n\t}\n\n\thandleChange = (event) => {\n\t\tthis.setState({[event.target.name]:event.target.value})\n\t}\n\n\tcreateNewLink(){\n\t\tlet values = [...this.state.pages];\n\t\tvalues.push({title: `Link ${this.state.numberOfLinks}`, type:\"parent\", visible:true, children:[], index:this.state.numberOfLinks});\n\t\tthis.setState({pages:values, numberOfLinks:this.state.numberOfLinks+1});\n\t}\n\n\taddLink(title, children){\n\t\tlet values = [...this.state.pages];\n\t\tvalues.push({title: title, type:\"parent\", visible:true, children:children, index:this.state.numberOfLinks});\n\t\tchildren.forEach((childId)=>{\n\t\t\tfor (let i=0; i<values.length; i++){\n\t\t\t\tif (values[i]._id===childId){\n\t\t\t\t\tvalues[i].parent=title;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\tthis.setState({pages:values, numberOfLinks:this.state.numberOfLinks+1});\n\t}\n\n\tremoveLink(index){\n\t\tlet values = [...this.state.pages];\n\t\tlet title = values[index].title;\n\n\t\tif(values[index]._id){\n\t\t\tlet deleted =[...this.state.deletedLinks];\n\t\t\tdeleted.push(values[index]._id);\n\t\t\tthis.setState({deletedLinks:deleted});\n\t\t}\n\t\tfor (let i=0; i<values.length;i++){\n\t\t\tvalues[i].index=values[i].index-1;\n\t\t\tif (values[i].parent===title) values[i].parent=null;\n\t\t}\n\t\tvalues.splice(index, 1);\n\t\tthis.setState({pages:values, numberOfLinks:this.state.numberOfLinks-1});\n\t}\n\n\tchangePageState(index, key, value){\n\t\tlet values = [...this.state.pages];\n\t\tvalues[index][key]=value;\n\t\tthis.setState({pages:values});\n\t}\n\n\n\tchangeLinkOrder(direction, index){\n\t\tvar newPages = [...this.state.pages];\n\t\tif (direction===\"up\" && index>0){\n\t\t\tnewPages[index].index = index-1;\n\t\t\tnewPages[index-1].index = index;\n\t\t} else if (direction===\"down\" && index<this.state.pages.length-1){\n\t\t\tnewPages[index].index = index+1;\n\t\t\tnewPages[index+1].index = index;\n\t\t} \n\t\tnewPages.sort(function(page1, page2) {\n\t\t  var key1 = (page1.index),\n\t\t    key2 = (page2.index);\n\t\t  // Compare the 2 dates\n\t\t  if (key1 < key2) return -1;\n\t\t  if (key1 > key2) return 1;\n\t\t  return 0;\n\t\t});\n\t\tthis.setState({pages:newPages});\n\t}\n\n\treturnToUserPanel(){\n        this.props.history.push('/userPanel');\n    }\n\n    onSubmit(){\n\n    \tlet children = {};\n    \tif (this.state.pages){\n\t    \tthis.state.pages.forEach((page)=>{\n\t    \t\tif (page.parent){\n\t    \t\t\tchildren[page.parent] ? children[page.parent].push(page._id) : children[page.parent]=[ page._id ]\n\t    \t\t}\n\t    \t});\n    \t}\n\n\n    \tconst LinkData={\"headerAlignment\":this.state.headerAlignment, \"menuStyle\":this.state.menuStyle, \"portfolioStyle\":this.state.portfolioStyle, \"pages\":this.state.pages};\n    \t\n    \taxios.post(\"/edit/updateLinks\", LinkData).then((response)=>alert(\"Link updating returned:\"+response.data))\n    \taxios.post(\"/remove/removeLinks\", this.state.deletedLinks).then((response)=>alert(response.data));\n    }\n\n\trender(){\n\t\tconst createLinks = this.state.pages.map((page)=>\n\t\t\t<li key={page.title} className=\"linkEditingContainer\"><LinkEditingObject index={page.index} title={page.title} type={page.type} changeParentState={this.changePageState} changeOrder={this.changeLinkOrder} removeLink={this.removeLink}/></li>\n\t\t);\n\n\t\treturn(\n\t\t\t<div className=\"pageEditor\">\n\t\t\t\t<BackButton backPage={this.returnToUserPanel}/>\n\t\t\t\t<div className=\"inputGroup\">\n\t\t\t\t\t<label className='inputLabel home' htmlFor='menuStyle'>Choose your navigation style:</label>\n\t\t\t\t\t<select name='menuStyle' className='homePageSelect' value={this.state.menuStyle} onChange={this.handleChange}>\n\t\t\t\t\t\t<option value='top'>Top Bar</option>\n\t\t\t\t\t\t<option value='dropdown'>Dropdown Menu</option>\n\t\t\t\t\t\t<option value='sidebar'>Sidebar Menu</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"inputGroup\">\n\t\t\t\t\t<label className='inputLabel home' htmlFor='headerAlignment'>Choose your website title orientation:</label>\n\t\t\t\t\t<select name='headerAlignment' className='homePageSelect' value={this.state.headerAlignment} onChange={this.handleChange}>\n\t\t\t\t\t\t<option value='left'>Left</option>\n\t\t\t\t\t\t<option value='center'>Center</option>\n\t\t\t\t\t\t<option value='right'>Right</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"inputGroup\">\n\t\t\t\t\t<label className='inputLabel home' htmlFor='type'>Choose your portfolio style:</label>\n\t\t\t\t\t<select name='portfolioStyle' className='homePageSelect' value={this.state.portfolioStyle} onChange={this.handleChange}>\n\t\t\t\t\t\t<option value='grid'>Grid</option>\n\t\t\t\t\t\t<option value='list'>List</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\t\t\t\t\n\t\t\t\t<div className=\"linkEditing\">\n\t\t\t\t\t<h3>You can edit the visibility and order of your menu links below</h3>\n\t\t\t\t\t{ createLinks }\n\t\t\t\t</div>\n\n\n\t\t\t\t{this.state.pages.length>0 ? \n\t\t\t\t\t<ParentLinkObject pages={this.state.pages} addLink={this.addLink}/> :\n\t\t\t\t\t<span>Loading link adder...</span>\n\t\t\t\t}\n\n\t\t\t\t<div className=\"layoutSubmitButtons\">\n\t\t\t\t\t<button type=\"button\" className=\"layoutSubmitButton\" \n\t\t\t\t\t\tonClick={this.onSubmit}>\n\t\t\t\t    \tSubmit Changes\n\t\t\t\t\t</button>\n\t\t\t\t\t<button type=\"button\" className=\"layoutSubmitButton\" \n\t\t\t\t\t\tonClick={this.returnToUserPanel}>\n\t\t\t\t    \tCancel\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\n\t\t\t</div>\n\n\t\t)\n\t}\n}\n\n\n\n// represents a conntainer with all the fields for editing a link\nclass LinkEditingObject extends Component{\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state ={\n\t\t\tvisibility:\"visible\"\n\t\t}\n\t\tthis.handleChange=this.handleChange.bind(this);\n\t\tthis.incrementLinkOrder=this.incrementLinkOrder.bind(this);\n\t\tthis.decrementLinkOrder=this.decrementLinkOrder.bind(this);\n\t\tthis.removeLink=this.removeLink.bind(this);\n\t}\n\n\thandleChange = (event) => {\n\t\tthis.setState({[event.target.name]:event.target.value});\n\t\tthis.props.changeParentState(this.props.index, event.target.name, event.target.value);\n\t}\n\n\tdecrementLinkOrder(){\n\t\tthis.props.changeOrder(\"up\", this.props.index)\n\t}\n\n\tincrementLinkOrder(){\n\t\tthis.props.changeOrder(\"down\", this.props.index)\n\t}\n\n\tremoveLink(){\n\t\tthis.props.removeLink(this.props.index);\n\t}\n\n\trender(){\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<div className='linkEditingField'> {this.props.title} </div>\n\t\t\t\t<select name='visibility' className='homePageSelect linkEditingField' value={this.state.type} onChange={this.handleChange}>\n\t\t\t\t\t<option value='visible'>Visible</option>\n\t\t\t\t\t<option value='notVisible'>Not Visible</option>\n\t\t\t\t</select>\n\t\t\t\t<div className=\"linkEditingField linkOrderArrows\">\n\t\t\t\t\t<div className=\"upArrow\" name=\"up\" onClick={this.decrementLinkOrder}><FaSortUp/></div>\n\t\t\t\t\t<div className=\"downArrow\" name=\"down\" onClick={this.incrementLinkOrder}><FaSortDown/></div>\n\t\t\t\t</div>\n\t\t\t\t{ this.props.type===\"parent\" ? \n\t\t\t\t\t<button type=\"button\" className=\"linkEditingField tooltip trashButton\" \n\t\t\t\t\t\tonClick={this.removeLink}>\n\t\t\t\t    \t<FaTrashAlt />\n\t\t\t\t\t    <span className=\"tooltiptext\">Remove this Link</span>\n\t\t\t\t\t</button> : null\n\t\t\t\t}\n\t\t\t</div>\n\t\t)\n\t}\n\n}\n\n\n\n// class for creating a parent link and giving it children. When children are added to its children list\n// the respective children have their parent fields changed\n\n\n// first create link, then when they click \"create\" add it to the list \nclass ParentLinkObject extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state ={\n\t\t\ttitle:\"\",\n\t\t\tcheckboxes: props.pages.reduce(\n\t\t      (pages, page) => ({\n\t\t        ...pages,\n\t\t        [page._id]: false\n\t\t      }),\n\t\t      {}\n\t\t    )\n\t\t}\n\n\t\tthis.handleCheckboxChange=this.handleCheckboxChange.bind(this);\n\t\tthis.handleChange=this.handleChange.bind(this);\n\t\tthis.createCheckbox=this.createCheckbox.bind(this);\n\t\tthis.createCheckboxes=this.createCheckboxes.bind(this);\t\n\t\tthis.addLink=this.addLink.bind(this);\n\t\tthis.clear=this.clear.bind(this);\n\t}\n\n\thandleChange = (event) => {\n\t\tif (event){\n\t\t\tthis.setState({[event.target.name]:event.target.value})\n\t\t}\n\t}\n\n\thandleCheckboxChange = event => {\n\t    const { name } = event.target;\n\n\t    this.setState(prevState => ({\n\t      checkboxes: {\n\t        ...prevState.checkboxes,\n\t        [name]: !prevState.checkboxes[name]\n\t      }\n\t    }));\n\t};\n\n\tcreateCheckbox = page =>{ \n\t\tif (page.type!==\"parent\"){\n\t\t\treturn (\n\t\t\t\t<Checkbox\n\t\t\t\t  key={page._id}\n\t\t\t\t  label={page.title}\n\t\t\t\t  name={page._id}\n\t\t\t\t  isSelected={this.state.checkboxes[page._id]}\n\t\t\t\t  onCheckboxChange={this.handleCheckboxChange}\n\t\t\t\t/>\n\t\t\t);\t\t\n\t\t} \n\t\treturn null;\n\n\t}\n\n\tcreateCheckboxes = () => this.props.pages.map(this.createCheckbox);\n\n\n\taddLink(){\n\t\tif (this.state.title!==\"\"){\n\t\t\tlet children = Object.keys(this.state.checkboxes).filter(key => this.state.checkboxes[key])\n\t\t\tthis.props.addLink(this.state.title, children);\n\t\t\tthis.clear();\t\n\t\t}\n\t}\n\n\tclear(){\n\t\tlet clearedCheckBoxes=this.state.checkboxes;\n\t\tObject.keys(clearedCheckBoxes).forEach((key)=>clearedCheckBoxes[key]=false)\n\n\t\tthis.setState({\t\t\t\n\t\t\ttitle: \"\",\n\t\t\tcheckboxes: clearedCheckBoxes\n\t\t});\n\t};\n\n\n\trender(){\n\t\treturn(\n\t\t\t<div className=\"parentLinkContainer\">\n\t\t\t\t<h3> Create a New Parent Link </h3>\n\t\t\t\t<h5> (For example if you want several portfolios to dropdown under one link) </h5>\n\t\t\t\t<label className='inputLabel' htmlFor=\"title\">Title:</label>\n\t\t\t\t<input type='text' className='smallPageField' name=\"title\" value={this.state.title} onChange={this.handleChange}/>\n\t\t\t\t<label className='inputLabel' htmlFor=\"children\">Choose children pages:</label>\n\t\t\t\t<div name=\"children\" className=\"childLinkSelection\">\n\t\t\t\t\t{ this.createCheckboxes() }\n\t\t\t\t</div>\n\t\t\t\t<button type=\"button\" className=\"layoutSubmitButton\" \n\t\t\t\t\tonClick={this.addLink}>\n\t\t\t    \tAdd Link\n\t\t\t\t</button>\n\t\t\t\t<button type=\"button\" className=\"layoutSubmitButton\" \n\t\t\t\t\tonClick={this.clear}>\n\t\t\t    \tCancel\n\t\t\t\t</button>\t\t\t\n\t\t\t</div>\n\t\t)\n\t}\n\n\n}\n\n\t\t\t\t// <div className=\"linkOrderArrows\">\n\t\t\t\t// \t<div className=\"upArrow\" name=\"up\" onClick={this.decrementLinkOrder}><FaSortUp/></div>\n\t\t\t\t// \t<div className=\"downArrow\" name=\"down\" onClick={this.incrementLinkOrder}><FaSortDown/></div>\n\t\t\t\t// </div>\n\t\t\t\t// <button type=\"button\" className=\"tooltip trashButton\" \n\t\t\t\t// \tonClick={this.removeLink}>\n\t\t\t //    \t<FaTrashAlt />\n\t\t\t\t//     <span className=\"tooltiptext\">Remove this Link</span>\n\t\t\t\t// </button>\n\n\n\n\t\t\t\t// <button type=\"button\" className=\"tooltip\" \n\t\t\t\t// \tonClick={this.decrementLinkOrder}>\n\t\t\t //    \t<FaSortUp/>\n\t\t\t\t//     <span className=\"tooltiptext\">Move link up</span>\n\t\t\t\t// </button>\n\t\t\t\t// <button type=\"button\" className=\"tooltip trashButton\" \n\t\t\t\t// \tonClick={this.incrementLinkOrder}>\n\t\t\t //    \t<FaSortDown/>\n\t\t\t\t//     <span className=\"tooltiptext\">Move link up</span>\n\t\t\t\t// </button>\n\n\n// taken from: http://react.tips/checkboxes-in-react-16/\nconst Checkbox = ({ label, name, isSelected, onCheckboxChange }) => (\n  <div className=\"childLinkCheckbox\">\n    <label>\n      <input\n        type=\"checkbox\"\n        name={name}\n        checked={isSelected}\n        onChange={onCheckboxChange}\n        className=\"form-check-input\"\n      />\n      {label}\n    </label>\n  </div>\n);"]},"metadata":{},"sourceType":"module"}