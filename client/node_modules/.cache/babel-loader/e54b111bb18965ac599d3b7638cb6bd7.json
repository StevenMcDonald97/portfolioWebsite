{"ast":null,"code":"import _classCallCheck from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import ImageEditor from\"src/App/admin/imageEditor\";import ErrorBoundary from'src/App/errorBoundary';console.log(process.env.PUBLIC_URL);var images=require.context('../images',true);var Contact=/*#__PURE__*/function(_Component){_inherits(Contact,_Component);var _super=_createSuper(Contact);function Contact(props){var _this;_classCallCheck(this,Contact);_this=_super.call(this,props);_this.removeImage=function(index){var deleted=_this.state.deletedImages;deleted.push(_this.state.images[index].fileName);_this.setState({deletedImages:deleted});var values=_this.state.images;values.splice(index,1);_this.setState({images:values});};_this.state={images:[],imgURLs:[],deletedImages:[],finishedLoadingImages:false};_this.loadImages=_this.loadImages.bind(_assertThisInitialized(_this));_this.removeImage=_this.removeImage.bind(_assertThisInitialized(_this));_this.onSubmit=_this.onSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(Contact,[{key:\"shouldComponentUpdate\",value:function shouldComponentUpdate(){return!(this.state.imgURLs.length===this.state.images.length&&this.state.finishedLoadingImages);}},{key:\"componentDidMount\",value:function componentDidMount(){this.loadImages();}},{key:\"loadImages\",value:function loadImages(){var _this2=this;/* fetch all images from database */axios.get('/image/getAll').then(function(response){_this2.setState({images:response.data});var values=_this2.state.imgURLs;response.data.forEach(function(image,index){try{values.push(images(\"./\".concat(image.fileName)));}catch(error){values.push(images(\"./defaultImage.png\"));console.log(\"Could not load image \"+image.fileName);console.log(\"Error: \"+error);}});_this2.setState({imgURLs:values,finishedLoadingImages:true});});}},{key:\"onSubmit\",value:function onSubmit(images){axios.post(\"/edit/editImages\",images,{// receive two    parameter endpoint url ,form data\n}).then(function(res){// then print response status\nconsole.log(\"Updating images in database returned: \".concat(res.statusText));}).catch(function(err){return console.log(err);});axios.post(\"/remove/removeImages\",this.state.deletedImages,{}).then(function(res){// then print response status\nconsole.log(\"Deleteing images from database returned: \".concat(res.statusText));}).catch(function(err){return console.log(err);});}},{key:\"render\",value:function render(){var _this3=this;if(this.state.images.length>0){return/*#__PURE__*/React.createElement(ErrorBoundary,null,/*#__PURE__*/React.createElement(\"div\",{className:\"pageEditor\"},/*#__PURE__*/React.createElement(ImageEditor,Object.assign({imageURLs:this.state.imgURLs,images:this.state.images,removeImageFromParent:this.removeImage,backPage:function backPage(){return _this3.props.history.push('/userPanel');},onSubmit:this.onSubmit},this.props))));}else{return/*#__PURE__*/React.createElement(\"h3\",null,\"No Images to Edit\");}}}]);return Contact;}(Component);export{Contact as default};","map":{"version":3,"sources":["/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/src/App/admin/editImages.js"],"names":["React","Component","axios","ImageEditor","ErrorBoundary","console","log","process","env","PUBLIC_URL","images","require","context","Contact","props","removeImage","index","deleted","state","deletedImages","push","fileName","setState","values","splice","imgURLs","finishedLoadingImages","loadImages","bind","onSubmit","length","get","then","response","data","forEach","image","error","post","res","statusText","catch","err","history"],"mappings":"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","sourcesContent":["import React, { Component} from 'react';\nimport axios from 'axios';\nimport ImageEditor from \"src/App/admin/imageEditor\";\nimport ErrorBoundary from 'src/App/errorBoundary';\nconsole.log(process.env.PUBLIC_URL);\nconst images = require.context('../images', true);\n\nexport default class Contact extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state ={\n\t\t\timages: [],\n\t\t\timgURLs:[],\n\t\t\tdeletedImages:[],\n\t\t\tfinishedLoadingImages: false\n\t\t};\n\t\tthis.loadImages = this.loadImages.bind(this);\n\t\tthis.removeImage=this.removeImage.bind(this);\n\t\tthis.onSubmit=this.onSubmit.bind(this);\n   \t}\n\n   \tshouldComponentUpdate () {\n\t    return !((this.state.imgURLs.length===this.state.images.length) && this.state.finishedLoadingImages);\n\t}\n\n\tcomponentDidMount(){\n\t\tthis.loadImages();\n\t}\n\n\tloadImages(){\n\t\t/* fetch all images from database */\n\t\taxios.get('/image/getAll')\n\t\t  .then((response) => {\n\t\t  \tthis.setState({images:response.data});\n\t\t  \tlet values=this.state.imgURLs;\n\t\t  \tresponse.data.forEach((image, index)=>{\n\t\t  \t\ttry{\n\t\t  \t\t\tvalues.push(images(`./${image.fileName}`));\n\t\t  \t\t} catch (error) {\n\t\t\t\t\tvalues.push(images(\"./defaultImage.png\"));\n\t\t  \t\t\tconsole.log(\"Could not load image \"+image.fileName)\n\t\t  \t\t\tconsole.log(\"Error: \"+error);\n\t\t  \t\t}\n\t\t  \t})\n\t\t  \tthis.setState({imgURLs:values, finishedLoadingImages:true})\n\t\t});\n\t}\n\n\tremoveImage = (index) => {\n\t\tlet deleted=this.state.deletedImages;\n\t\tdeleted.push(this.state.images[index].fileName);\n\t\tthis.setState({deletedImages:deleted});\n\n\t\tlet values = this.state.images;\n\t\tvalues.splice(index, 1);\n\t\tthis.setState({images:values});\n\t};\n\n\tonSubmit(images){\n\t\taxios.post(\"/edit/editImages\", images, { \n\t          // receive two    parameter endpoint url ,form data\n\t    }).then(res => { // then print response status\n\t        console.log(`Updating images in database returned: ${res.statusText}`)\n\t    }).catch(err => console.log(err));\n\n\t    axios.post(\"/remove/removeImages\", this.state.deletedImages, {}).then(res => { // then print response status\n\t        console.log(`Deleteing images from database returned: ${res.statusText}`)\n\t    }).catch(err => console.log(err));\n\t}\n\n\trender(){\n\t\tif (this.state.images.length>0){\n\t\t\treturn(\n\t    \t\t<ErrorBoundary>\n\t    \t\t\t<div className=\"pageEditor\">\n\t\t\t    \t\t<ImageEditor imageURLs={this.state.imgURLs} \n\t\t\t\t    \t\timages={this.state.images} \n\t\t\t\t    \t\tremoveImageFromParent={this.removeImage} \n\t\t\t\t    \t\tbackPage={()=>this.props.history.push('/userPanel')}\n\t\t\t\t    \t\tonSubmit={this.onSubmit}\n\t\t\t\t    \t\t{...this.props}/>\n\t\t\t\t    </div>\n\t\t\t    </ErrorBoundary>\n\t\t\t)\n\t\t} else {\n\t\t\treturn <h3>No Images to Edit</h3>\n\t\t}\n\t\n\t}\n }\n\n\n\n\n\n\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}