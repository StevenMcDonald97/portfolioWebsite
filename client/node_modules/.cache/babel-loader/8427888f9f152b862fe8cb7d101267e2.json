{"ast":null,"code":"import _toConsumableArray from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import{FaTrashAlt}from'react-icons/fa';// Font Awesome\nimport ErrorBoundary from'src/App/errorBoundary';import{BackButton}from'src/App/admin/helperComponents';var ImageEditor=/*#__PURE__*/function(_Component){_inherits(ImageEditor,_Component);var _super=_createSuper(ImageEditor);function ImageEditor(props){var _this;_classCallCheck(this,ImageEditor);_this=_super.call(this,props);_this.removeImage=function(index){if(index>-1){var values=_toConsumableArray(_this.state.images);values.splice(index,1);_this.setState({images:values});var urls=_this.state.imageURLs;urls.splice(index,1);_this.setState({imageURLs:urls});_this.props.removeImageFromParent(index);}};_this.handleInputChange=function(index,event){var values=_toConsumableArray(_this.state.images);if(event.target.name===\"portfolio\"&&event.target.value!==\"No Portfolio\"&&!values[index][\"oldPortfolio\"]){values[index][\"oldPortfolio\"]=values[index][\"portfolio\"];}values[index][event.target.name]=event.target.value;values[index][\"isChanged\"]=true;_this.setState({images:values});};_this.onCancel=function(){_this.props.history.push('/userPanel');};_this.uploadAndAddMoreImages=function(){var changedImages=[];for(var i=0;i<_this.state.images.length;i++){if(_this.state.images[i]['isChanged']){changedImages.push(_this.state.images[i]);}};_this.props.onSubmit(changedImages,false);_this.props.returnToUpload();};_this.state={images:_this.props.images,imageURLs:_this.props.imageURLs,portfolios:[]};_this.getPortfolioTitles=_this.getPortfolioTitles.bind(_assertThisInitialized(_this));_this.removeImage=_this.removeImage.bind(_assertThisInitialized(_this));_this.onCancel=_this.onCancel.bind(_assertThisInitialized(_this));_this.onSubmit=_this.onSubmit.bind(_assertThisInitialized(_this));return _this;}_createClass(ImageEditor,[{key:\"componentDidMount\",value:function componentDidMount(){this.getPortfolioTitles();}},{key:\"getPortfolioTitles\",value:function getPortfolioTitles(){var _this2=this;/* fetch all images from database */axios.get('/api/getPortfolioTitles').then(function(response){_this2.setState({portfolios:response.data});});}},{key:\"onSubmit\",value:function onSubmit(){var changedImages=[];for(var i=0;i<this.state.images.length;i++){if(this.state.images[i]['isChanged']){changedImages.push(this.state.images[i]);}};this.props.history.push('/userPanel');this.props.onSubmit(changedImages,true);}},{key:\"render\",value:function render(){var _this3=this;if(this.state.imageURLs.length>0){return/*#__PURE__*/React.createElement(\"div\",{className:\"pageEditor\"},/*#__PURE__*/React.createElement(ErrorBoundary,null,/*#__PURE__*/React.createElement(BackButton,{backPage:this.props.backPage}),/*#__PURE__*/React.createElement(\"h3\",{className:\"editingTitle\"},\"Edit Images\"),this.state.images.map(function(img,index){return/*#__PURE__*/React.createElement(\"div\",{className:\"editImageTag\",key:img.fileName},/*#__PURE__*/React.createElement(ImageErrorBoundary,{src:_this3.state.imageURLs[index],title:img.title,portfolio:img.portfolio}),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"imageField\",name:\"title\",value:img.title,placeholder:\"Title\",onChange:function onChange(event){return _this3.handleInputChange(index,event);}}),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"imageSmallField\",name:\"date\",value:img.date,placeholder:\"Date\",onChange:function onChange(event){return _this3.handleInputChange(index,event);}}),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"imageSmallField\",name:\"medium\",value:img.medium,placeholder:\"Medium\",onChange:function onChange(event){return _this3.handleInputChange(index,event);}}),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"imageSmallField\",name:\"size\",value:img.size,placeholder:\"Size\",onChange:function onChange(event){return _this3.handleInputChange(index,event);}}),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"imageSmallField\",name:\"price\",value:img.price,placeholder:\"Price\",onChange:function onChange(event){return _this3.handleInputChange(index,event);}}),/*#__PURE__*/React.createElement(\"select\",{className:\"imageField\",name:\"availability\",value:img.availability,onChange:function onChange(event){return _this3.handleInputChange(index,event);}},/*#__PURE__*/React.createElement(\"option\",{value:\"forSale\"},\"For Sale\"),/*#__PURE__*/React.createElement(\"option\",{value:\"notForSale\"},\"Not For Sale\"),/*#__PURE__*/React.createElement(\"option\",{value:\"sold\"},\"Sold\"),/*#__PURE__*/React.createElement(\"option\",{value:\"other\"},\"Not Applicable\")),/*#__PURE__*/React.createElement(\"select\",{className:\"imageField\",name:\"portfolio\",value:img.portfolio,onChange:function onChange(event){return _this3.handleInputChange(index,event);}},/*#__PURE__*/React.createElement(\"option\",{value:\"none\"},\"No Portfolio\"),_this3.state.portfolios.map(function(portfolio){return/*#__PURE__*/React.createElement(\"option\",{key:img.title+portfolio,value:portfolio},portfolio);})),/*#__PURE__*/React.createElement(\"button\",{key:'button'+img.fileName,type:\"button\",className:\"tooltip btn\",onClick:function onClick(){return _this3.removeImage(index);}},/*#__PURE__*/React.createElement(FaTrashAlt,null),/*#__PURE__*/React.createElement(\"span\",{className:\"tooltiptext\"},\"Remove this Image\")));})),/*#__PURE__*/React.createElement(\"div\",{className:\"submitButtons\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn tooltip layoutSubmitButton\",onClick:this.props.backPage},\"Cancel\",/*#__PURE__*/React.createElement(\"span\",{className:\"tooltiptext\"},\" If you clicked 'Upload and Add More Images' you will need to click Upload and Save to finish the changes\")),this.props.returnToUpload?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"layoutSubmitButton\",onClick:this.uploadAndAddMoreImages},\"Upload and Add More Images\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"layoutSubmitButton\",onClick:this.onSubmit},\"Upload and Save\")):/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"layoutSubmitButton\",onClick:this.onSubmit},\"Upload\"),\"// \",/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"layoutSubmitButton\",onClick:this.onSubmit},\"Upload\")));}else{return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\" No Images to Edit \"),/*#__PURE__*/React.createElement(\"div\",{className:\"submitButtons\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"layoutSubmitButton\",onClick:this.props.backPage},\"Cancel\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"layoutSubmitButton\",onClick:this.onSubmit},\"Upload\")));}}}]);return ImageEditor;}(Component);export{ImageEditor as default};var ImageErrorBoundary=/*#__PURE__*/function(_Component2){_inherits(ImageErrorBoundary,_Component2);var _super2=_createSuper(ImageErrorBoundary);function ImageErrorBoundary(props){var _this4;_classCallCheck(this,ImageErrorBoundary);_this4=_super2.call(this,props);_this4.state={hasError:false};return _this4;}_createClass(ImageErrorBoundary,[{key:\"componentDidCatch\",value:function componentDidCatch(error,info){// Display fallback UI\nthis.setState({hasError:true});}},{key:\"render\",value:function render(){if(this.state.hasError){// You can render any custom fallback UI\nreturn/*#__PURE__*/React.createElement(\"img\",{src:\"App/upload/defaultImage.png\",className:\"editImageTag uploadImage\",alt:\"Error loading this\"});}return/*#__PURE__*/React.createElement(\"img\",{src:this.props.src,className:\"editImageTag uploadImage\",alt:\"Work titled \".concat(this.props.title,\" in portfolio \").concat(this.props.portfolio)});}}]);return ImageErrorBoundary;}(Component);","map":{"version":3,"sources":["/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/src/App/admin/imageEditor.js"],"names":["React","Component","axios","FaTrashAlt","ErrorBoundary","BackButton","ImageEditor","props","removeImage","index","values","state","images","splice","setState","urls","imageURLs","removeImageFromParent","handleInputChange","event","target","name","value","onCancel","history","push","uploadAndAddMoreImages","changedImages","i","length","onSubmit","returnToUpload","portfolios","getPortfolioTitles","bind","get","then","response","data","backPage","map","img","fileName","title","portfolio","date","medium","size","price","availability","ImageErrorBoundary","hasError","error","info","src"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport { FaTrashAlt } from 'react-icons/fa';  // Font Awesome\nimport PropTypes from 'prop-types';\nimport ErrorBoundary from 'src/App/errorBoundary';\nimport { BackButton } from 'src/App/admin/helperComponents';\n\nexport default class ImageEditor extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state ={\n\t\t\timages:this.props.images,\n\t\t\timageURLs:this.props.imageURLs,\n\t\t\tportfolios:[]\n\t\t};\n\t\tthis.getPortfolioTitles=this.getPortfolioTitles.bind(this);\n\t\tthis.removeImage = this.removeImage.bind(this);\n\t\tthis.onCancel=this.onCancel.bind(this);\n\t\tthis.onSubmit = this.onSubmit.bind(this);\n   \t}\n\n   \tcomponentDidMount(){\n\t\tthis.getPortfolioTitles();\n\t}\n\n   \tgetPortfolioTitles(){\n\t\t/* fetch all images from database */\n\t\taxios.get('/api/getPortfolioTitles')\n\t\t  .then((response) => {\n\t\t  \tthis.setState({portfolios:response.data});\n\t\t  });\n\t}\n\n\tremoveImage = (index) => {\n\t\tif(index > -1){\n\t\t\tlet values = [...this.state.images];\n\t\t\tvalues.splice(index, 1);\n\t\t\tthis.setState({images:values});\n\t\t\tlet urls = this.state.imageURLs;\n\t\t\turls.splice(index, 1);\n\t\t\tthis.setState({imageURLs:urls});\n\t\t\tthis.props.removeImageFromParent(index);\n\t\t}\n\t};\n\n\n\thandleInputChange = (index, event) => {\n\t    const values = [...this.state.images];\n\t    if (event.target.name===\"portfolio\" && event.target.value !== \"No Portfolio\" && !values[index][\"oldPortfolio\"]){\n\t    \tvalues[index][\"oldPortfolio\"]=values[index][\"portfolio\"];\n\t    }\n\t    values[index][event.target.name]=event.target.value;\n\t    values[index][\"isChanged\"]=true;\n\t    this.setState({images:values});\n\t};\n\n\tonCancel = () =>{\n\t\tthis.props.history.push('/userPanel');\n\t}\n\n\tuploadAndAddMoreImages =() =>{\n\t\tlet changedImages = [];\n\t\tfor (let i =0; i<this.state.images.length; i++){\n\t\t\tif (this.state.images[i]['isChanged']){\n\t\t\t\tchangedImages.push(this.state.images[i]);\n\t\t\t}\n\t\t};\n\t\tthis.props.onSubmit(changedImages, false);\n\t\tthis.props.returnToUpload();\n\t}\n\n\tonSubmit() {\n\t\tlet changedImages = [];\n\t\tfor (let i =0; i<this.state.images.length; i++){\n\t\t\tif (this.state.images[i]['isChanged']){\n\t\t\t\tchangedImages.push(this.state.images[i]);\n\t\t\t}\n\t\t};\n\t\tthis.props.history.push('/userPanel');\n\t\tthis.props.onSubmit(changedImages, true);\n\t}\n\n    render(){\n    \tif (this.state.imageURLs.length>0){\n\t    \treturn(\n\t    \t\t<div className=\"pageEditor\">\n\t    \t\t\t<ErrorBoundary>\n          \t\t\t\t<BackButton backPage={this.props.backPage}/>\n\t\t\t\t\t\t<h3 className='editingTitle'>Edit Images</h3>\n\t\t\t\t\t\t{(this.state.images).map((img, index) => (\n\t\t\t\t            <div className='editImageTag' key={img.fileName}>\n\t\t\t\t              <ImageErrorBoundary src={this.state.imageURLs[index]} title={img.title} portfolio={img.portfolio}/>\n\t\t\t\t              <input type='text' className='imageField' name='title' value={ img.title } placeholder='Title' onChange={event => this.handleInputChange(index, event)} />\n\t\t\t\t              <input type='text' className='imageSmallField' name='date' value={ img.date } placeholder='Date' onChange={event => this.handleInputChange(index, event)} />\n\t\t\t\t              <input type='text' className='imageSmallField' name='medium' value={ img.medium } placeholder='Medium' onChange={event => this.handleInputChange(index, event)} />\n\t\t\t\t              <input type='text' className='imageSmallField' name='size' value={ img.size } placeholder='Size' onChange={event => this.handleInputChange(index, event)} />\n\t\t\t\t              <input type='text' className='imageSmallField' name='price' value={ img.price } placeholder='Price' onChange={event => this.handleInputChange(index, event)} />\n\t\t\t\t              <select className='imageField' name='availability' value={img.availability} onChange={event => this.handleInputChange(index, event)}>            \n\t\t\t\t                <option value='forSale'>For Sale</option>\n\t\t\t\t                <option value='notForSale'>Not For Sale</option>\n\t\t\t\t                <option value='sold'>Sold</option>\n\t\t\t\t                <option value='other'>Not Applicable</option>\n\t\t\t\t              </select>\n\t\t\t\t              <select className='imageField' name='portfolio' value={img.portfolio} onChange={event => this.handleInputChange(index, event)}>            \n\t\t\t\t                <option value='none'>No Portfolio</option>\n\t\t\t\t                { \n\t\t\t\t                \tthis.state.portfolios.map((portfolio)=>\n\t\t\t\t                \t\t<option key={img.title+portfolio} value={portfolio}>{portfolio}</option>\n\t\t\t\t                \t)\n\t\t\t\t                }\n\t\t\t\t              </select>\n\t\t\t\t              <button key={'button'+img.fileName} type='button' className='tooltip btn' onClick={()=>this.removeImage(index)}>\n\t\t\t\t                <FaTrashAlt />\n\t\t\t\t                <span className='tooltiptext'>Remove this Image</span>\n\t\t\t\t              </button>\n\t\t\t\t            </div>\n\t\t\t\t        ))}\n\t\t\t\t    </ErrorBoundary>\n\t\t\t\t    <div className=\"submitButtons\">\n\t\t\t        \t<button type='button' className='btn tooltip layoutSubmitButton' onClick={this.props.backPage}>\n\t\t\t        \t\tCancel\n\t\t\t        \t\t<span className='tooltiptext'> If you clicked 'Upload and Add More Images' you will need to click Upload and Save to finish the changes</span>\n\t\t\t        \t</button>\n\t\t\t        \t{ this.props.returnToUpload ? \n\t\t\t        \t\t<div>\n\t\t\t\t        \t\t<button type='button' className='layoutSubmitButton' onClick={this.uploadAndAddMoreImages}>\n\t\t\t\t        \t\t\tUpload and Add More Images\n\t\t\t\t        \t\t</button> \n\t\t\t\t        \t\t<button type='button' className='layoutSubmitButton' onClick={this.onSubmit}>\n\t\t\t\t        \t\t\tUpload and Save\n\t\t\t\t        \t\t</button>\n\t\t\t\t        \t</div>\n\t\t\t        \t\t: \n\t\t\t        \t\t<button type='button' className='layoutSubmitButton' onClick={this.onSubmit}>Upload</button>\n\t\t\t        \t}\n\t\t\t        \t// <button type='button' className='layoutSubmitButton' onClick={this.onSubmit}>Upload</button>\n\t\t\t        </div>\n\t\t\t    </div>\n\t\t\t);\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<div>\n\t\t\t\t\t<h3> No Images to Edit </h3>\n\t\t\t\t    <div className=\"submitButtons\">\n\t\t\t        \t<button type='button' className='layoutSubmitButton' onClick={this.props.backPage}>Cancel</button>\n\t\t\t        \t<button type='button' className='layoutSubmitButton' onClick={this.onSubmit}>Upload</button>\n\t\t\t        </div>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n    }\n}\n\nclass ImageErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  componentDidCatch(error, info) {\n    // Display fallback UI\n    this.setState({ hasError: true });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return (\n      \t<img src=\"App/upload/defaultImage.png\" className='editImageTag uploadImage' alt=\"Error loading this\"/>\n      )\n    }\n    return (\n\t\t<img src={this.props.src} className='editImageTag uploadImage' alt={`Work titled ${this.props.title} in portfolio ${this.props.portfolio}`}/>\n    )\n  }\n}\n\nImageEditor.propTypes={\n\timages:PropTypes.array,\n\timageURLs:PropTypes.array,\n\tremoveImageFromParent:PropTypes.func.isRequired,\n\tonSubmit:PropTypes.func.isRequired\n}\n"]},"metadata":{},"sourceType":"module"}