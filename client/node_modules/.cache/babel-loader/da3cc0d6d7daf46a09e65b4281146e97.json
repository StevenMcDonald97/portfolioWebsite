{"ast":null,"code":"var _jsxFileName = \"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/src/App/admin/blogTemplate.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { BackButton, UploadImage } from 'src/App/admin/helperComponents';\nimport BlogPostTemplate from 'src/App/admin/blogPostTemplate';\nimport { FaTrashAlt } from \"react-icons/fa\"; // Font Awesome\n\nimport PropTypes from \"prop-types\";\nexport default class BlogTemplate extends Component {\n  constructor(props) {\n    super(props);\n\n    this.getPageData = () => {\n      if (this.props.pageId) {\n        axios.get('/api/getPage', {\n          params: {\n            pageId: this.props.pageId,\n            pageType: \"blog\"\n          }\n        }).then(response => {\n          this.setState({\n            title: response.data.title,\n            text: response.data.text,\n            numPosts: response.data.posts.length,\n            posts: response.data.posts\n          });\n        });\n      }\n    };\n\n    this.state = {\n      title: \"\",\n      text: \"\",\n      numPosts: 0,\n      posts: [],\n      createPage: this.props.createPage,\n      deleted: [],\n      currentPost: null,\n      postTitle: null,\n      postBlurb: \"\",\n      postParagraphs: [],\n      postDate: \"\",\n      postImage: \"\",\n      postId: \"\"\n    };\n    this.onChange = this.onChange.bind(this);\n    this.openPostTemplate = this.openPostTemplate.bind(this);\n    this.returnToBlogEditor = this.returnToBlogEditor.bind(this);\n    this.addPost = this.addPost.bind(this);\n    this.removePost = this.removePost.bind(this);\n    this.onSubmit = this.onSubmit.bind(this);\n  }\n\n  onChange(event) {\n    this.setState({\n      [event.target.name]: event.target.value\n    });\n  }\n\n  componentDidMount() {\n    this.getPageData();\n  }\n\n  addPost() {\n    const values = [...this.state.posts];\n    values.push({\n      \"create\": true,\n      \"title\": \"New Post\",\n      \"blurb\": \"Edit Your post to add content\",\n      \"image\": \"\",\n      paragraphs: [],\n      keyValue: new Date().getTime()\n    });\n    this.setState({\n      posts: values\n    }, () => this.setState({\n      numPosts: this.state.numPosts + 1\n    }));\n  }\n\n  openPostTemplate(title, blurb, image, date, paragraphs, id) {\n    this.setState({\n      postTitle: title,\n      postBlurb: blurb,\n      postParagraphs: paragraphs,\n      postDate: date,\n      postImage: image,\n      postId: id\n    });\n  }\n\n  returnToBlogEditor() {\n    this.setState({\n      postTitle: null,\n      postBlurb: \"\",\n      postParagraphs: [],\n      postDate: \"\",\n      postImage: \"\",\n      postId: \"\"\n    });\n  }\n\n  removePost(index) {\n    const values = [...this.state.posts];\n    const deletedObjs = [...this.state.deleted];\n    deletedObjs.push(values[index]._id);\n    values.splice(index, 1);\n\n    for (var i = index; i < values.length; i++) {\n      values[i].num = values[i].num - 1;\n    }\n\n    this.setState({\n      numObjs: this.state.numObjs - 1\n    }, () => this.setState({\n      posts: values,\n      deleted: deletedObjs\n    }));\n  }\n\n  onSubmit() {\n    var posts = this.state.posts;\n    const PageData = {\n      \"title\": this.state.title,\n      \"text\": this.state.text,\n      \"deleted\": this.state.deleted,\n      \"id\": this.props.pageId\n    };\n\n    if (this.state.createPage) {\n      axios.post('/upload/uploadBlog', PageData).then(response => alert(response.data));\n    } else {\n      axios.post('/edit/editBlog', PageData).then(response => alert(response.data));\n    }\n\n    ;\n  }\n\n  render() {\n    const create_inputs = this.state.posts.map((post, index) => /*#__PURE__*/React.createElement(PostEditor, {\n      key: post._id ? post._id : post.keyValue,\n      title: post.title,\n      blurb: post.blurb,\n      image: post.image,\n      paragraphs: post.paragraphs,\n      date: post.date,\n      id: post.id,\n      num: index,\n      removePost: this.removePost,\n      openPostTemplate: this.openPostTemplate,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }\n    }));\n\n    if (this.state.postTitle) {\n      return /*#__PURE__*/React.createElement(BlogPostTemplate, {\n        title: this.state.postTitle,\n        blurb: this.state.postBlurb,\n        paragraphs: this.state.postParagraphs,\n        date: this.state.postDate,\n        image: this.state.postImage,\n        id: this.state.postId,\n        backPage: this.returnToBlogEditor,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 6\n        }\n      });\n    } else {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"pageEditor\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(BackButton, {\n        backPage: this.props.backPage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 6\n        }\n      }), /*#__PURE__*/React.createElement(\"form\", {\n        className: \"pageForm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 6\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"inputGroup\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"inputLabel\",\n        htmlFor: \"title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 8\n        }\n      }, \"Title:\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"smallPageField\",\n        name: \"title\",\n        value: this.state.title,\n        onChange: this.onChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 8\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"inputGroup\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"inputLabel\",\n        htmlFor: \"text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 8\n        }\n      }, \"Description:\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        className: \"smallPageField\",\n        name: \"text\",\n        value: this.state.text,\n        onChange: this.onChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 8\n        }\n      })), create_inputs, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"button\",\n        onClick: this.addPost,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 7\n        }\n      }, \"Create a new Post\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"editSubmitButtons\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"editSubmitButton\",\n        onClick: this.onSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 8\n        }\n      }, \" Submit \"), /*#__PURE__*/React.createElement(\"button\", {\n        type: \"button\",\n        className: \"editSubmitButton\",\n        onClick: this.props.backPage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 8\n        }\n      }, \"Cancel\"))));\n    }\n  }\n\n}\nBlogTemplate.propTypes = {\n  pageId: PropTypes.string,\n  createPage: PropTypes.bool,\n  pageType: PropTypes.string,\n  backPage: PropTypes.func.isRequired\n};\n\nclass PostEditor extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      title: this.props.title,\n      blurb: this.props.blurb\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      className: \"pageEditingObject\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"inputGroup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 6\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 6\n      }\n    }, \" \", this.state.title, \" \")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"inputGroup\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 6\n      }\n    }, \" \", this.state.blurb, \" \")), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      onClick: index => this.props.openPostTemplate(this.props.title, this.props.blurb, this.props.image, this.props.date, this.props.paragraphs, this.props.id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 5\n      }\n    }, \"Edit\"), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      name: this.props.num,\n      className: \"tooltip trashButton\",\n      onClick: index => this.props.removePost(this.props.num),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(FaTrashAlt, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"tooltiptext\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 9\n      }\n    }, \"Delete Post\")));\n  }\n\n}\n\nPostEditor.propTypes = {\n  num: PropTypes.number,\n  title: PropTypes.string,\n  blurb: PropTypes.string,\n  removePageObject: PropTypes.func\n};","map":{"version":3,"sources":["/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/src/App/admin/blogTemplate.js"],"names":["React","Component","axios","BackButton","UploadImage","BlogPostTemplate","FaTrashAlt","PropTypes","BlogTemplate","constructor","props","getPageData","pageId","get","params","pageType","then","response","setState","title","data","text","numPosts","posts","length","state","createPage","deleted","currentPost","postTitle","postBlurb","postParagraphs","postDate","postImage","postId","onChange","bind","openPostTemplate","returnToBlogEditor","addPost","removePost","onSubmit","event","target","name","value","componentDidMount","values","push","paragraphs","keyValue","Date","getTime","blurb","image","date","id","index","deletedObjs","_id","splice","i","num","numObjs","PageData","post","alert","render","create_inputs","map","backPage","propTypes","string","bool","func","isRequired","PostEditor","number","removePageObject"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport { BackButton, UploadImage } from 'src/App/admin/helperComponents';\nimport BlogPostTemplate from 'src/App/admin/blogPostTemplate';\nimport { FaTrashAlt } from \"react-icons/fa\";  // Font Awesome\nimport PropTypes from \"prop-types\";\n\nexport default class BlogTemplate extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state ={\n\t\t\ttitle:\"\",\n\t\t\ttext:\"\",\n\t\t\tnumPosts:0,\n\t\t\tposts:[],\n\t\t\tcreatePage:this.props.createPage,\n\t\t\tdeleted:[],\n\t\t\tcurrentPost:null,\n\t\t\tpostTitle:null,\n\t\t\tpostBlurb:\"\",\n            postParagraphs:[],\n            postDate:\"\",\n            postImage:\"\",\n            postId:\"\"\n\t\t}\n\t\tthis.onChange=this.onChange.bind(this);\n\t\tthis.openPostTemplate=this.openPostTemplate.bind(this);\n\t\tthis.returnToBlogEditor=this.returnToBlogEditor.bind(this);\n\t\tthis.addPost=this.addPost.bind(this);\n\t\tthis.removePost=this.removePost.bind(this);\n\t\tthis.onSubmit=this.onSubmit.bind(this);\n\t}\n\n\tonChange(event){\n\t\tthis.setState({[event.target.name]:event.target.value});\n\t}\n\t\n\n\tcomponentDidMount(){\n\t\tthis.getPageData();\n\t}\n\n    getPageData = () =>{\n    \tif (this.props.pageId){\n\t        axios.get('/api/getPage', { params: {pageId: this.props.pageId, pageType:\"blog\" } })\n\t        .then((response) => {\n\t          this.setState({\n\t            title:response.data.title, \n\t            text:response.data.text,\n\t           \tnumPosts:response.data.posts.length,\n\t           \tposts:response.data.posts\n\t            });\n\t        });\n\t    }\n    }\n\n\taddPost(){\n\t    const values = [...this.state.posts];\n\t\tvalues.push({\"create\":true, \"title\":\"New Post\", \"blurb\":\"Edit Your post to add content\", \"image\":\"\", paragraphs:[], \n\t\t\tkeyValue:new Date().getTime()});\n\t\tthis.setState({posts:values}, \n\t\t\t()=>this.setState({numPosts:this.state.numPosts+1}));\n\t}\n\n\topenPostTemplate( title, blurb, image, date, paragraphs, id){\n        this.setState({postTitle:title, postBlurb:blurb, postParagraphs:paragraphs, postDate:date, postImage:image, postId:id});\n\t}\n\n\treturnToBlogEditor(){\n\t\tthis.setState({postTitle:null, postBlurb:\"\", postParagraphs:[], postDate:\"\", postImage:\"\", postId:\"\"});\n\t}\n\n\tremovePost(index){\n\t    const values = [...this.state.posts];\n\t    const deletedObjs = [...this.state.deleted];\n\n\t    deletedObjs.push(values[index]._id);\n\n\t    values.splice(index, 1);\n\t    for (var i=index; i<values.length; i++)\t{\n\t    \tvalues[i].num=values[i].num-1;\n\t    }\n\n\t   \tthis.setState({numObjs:this.state.numObjs-1},\n\t   \t\t()=>this.setState({posts:values, deleted:deletedObjs}));\n\t}\n\n\tonSubmit(){\n\t\tvar posts = this.state.posts;\n\n\t\tconst PageData={\"title\":this.state.title, \"text\":this.state.text,\n\t\t\t\"deleted\":this.state.deleted, \"id\":this.props.pageId};\n\t\tif (this.state.createPage) { \n\t\t\taxios.post('/upload/uploadBlog', PageData).then((response)=>alert(response.data));\n\t\t} else {\n\t\t\taxios.post('/edit/editBlog', PageData).then((response)=>alert(response.data));\n\t\t};\n\t}\n\n\trender(){\n\t\tconst create_inputs = this.state.posts.map((post, index) => \n\t\t     \t<PostEditor key={post._id ? post._id : post.keyValue} \n\t\t     \t\ttitle={ post.title } \n\t\t     \t\tblurb={ post.blurb }\n\t\t     \t\timage={ post.image }\n\t\t     \t\tparagraphs={ post.paragraphs }\n\t\t     \t\tdate={ post.date } \n\t\t     \t\tid={post.id } \n\t\t     \t\tnum={ index } \n\t\t     \t\tremovePost={ this.removePost }\n\t\t     \t\topenPostTemplate = { this.openPostTemplate }\n\t\t     \t/>\n\t\t     \n\t    );\n\t\tif (this.state.postTitle){\n\t\t\treturn (\n\t\t\t\t\t<BlogPostTemplate \n\t\t\t\t\t\ttitle={this.state.postTitle} \n\t\t\t\t\t\tblurb={this.state.postBlurb} \n\t\t\t\t\t\tparagraphs={this.state.postParagraphs} \n\t\t\t\t\t\tdate={this.state.postDate} \n\t\t\t\t\t\timage={this.state.postImage} \n\t\t\t\t\t\tid={this.state.postId}\n\t\t\t\t\t\tbackPage={this.returnToBlogEditor}/>\n\t\t\t\t)\n\t\t} else {\n\t\t\treturn(\n\t\t\t\t<div className=\"pageEditor\">\n\t\t\t\t\t<BackButton backPage={this.props.backPage}/>\n\t\t\t\t\t<form className=\"pageForm\">\n\t\t\t\t\t\t<div className='inputGroup'>\n\t\t\t\t\t\t\t<label className='inputLabel' htmlFor='title'>Title:</label>\n\t\t\t\t\t\t\t<input type='text' className='smallPageField' name='title' \n\t\t\t\t\t\t\t\tvalue={this.state.title} \n\t\t\t\t\t\t\t\tonChange={this.onChange}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className='inputGroup'>\n\t\t\t\t\t\t\t<label className='inputLabel' htmlFor='text'>Description:</label>\n\t\t\t\t\t\t\t<input type='text' className='smallPageField' name='text' \n\t\t\t\t\t\t\t\tvalue={this.state.text} \n\t\t\t\t\t\t\t\tonChange={this.onChange}/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{ create_inputs }\n\t\t\t\t\t\t<button type=\"button\" className=\"button\" onClick={this.addPost}> \n\t\t\t\t\t\t\tCreate a new Post\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<div className=\"editSubmitButtons\">\n\t\t\t\t\t\t\t<button type=\"button\" className=\"editSubmitButton\" onClick={this.onSubmit}> Submit </button>\n\t\t\t\t\t\t\t<button type=\"button\" className=\"editSubmitButton\" onClick={this.props.backPage}>\n\t\t\t\t\t\t\t\tCancel \n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t)\n\t\t}\n\t}\n}\n\nBlogTemplate.propTypes = {\n\tpageId:PropTypes.string,\n\tcreatePage:PropTypes.bool,\n\tpageType:PropTypes.string,\n\tbackPage:PropTypes.func.isRequired\n}\n\n\nclass PostEditor extends Component {\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state={\n\t\t\ttitle:this.props.title,\n\t\t\tblurb:this.props.blurb\n\t\t}\n\t}\n\n\trender(){\n\t\treturn(\n\t \t\t<li className=\"pageEditingObject\">\n\t \t\t\t<div className=\"inputGroup\">\n\t\t\t\t\t<div> {this.state.title} </div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"inputGroup\">\n\t\t\t\t\t<div> {this.state.blurb} </div>\n\t\t\t\t</div>\n\t\t\t\t<button type=\"button\" onClick={index=>this.props.openPostTemplate( this.props.title, this.props.blurb, this.props.image, this.props.date, this.props.paragraphs, this.props.id)}>\n\t\t\t    \t\tEdit\n\t\t\t\t</button>\n\t\t\t\t<button type=\"button\" name={this.props.num} className=\"tooltip trashButton\" \n\t\t\t\t\tonClick={index=>this.props.removePost(this.props.num)}>\n\t\t\t    \t<FaTrashAlt />\n\t\t\t\t    <span className=\"tooltiptext\">Delete Post</span>\n\t\t\t\t</button>\n\t\t\t</li>\n\t\t)\n\t}\n}\n\nPostEditor.propTypes = {\n\tnum:PropTypes.number,\n\ttitle:PropTypes.string,\n\tblurb:PropTypes.string,\n\tremovePageObject:PropTypes.func\n}\n"]},"metadata":{},"sourceType":"module"}