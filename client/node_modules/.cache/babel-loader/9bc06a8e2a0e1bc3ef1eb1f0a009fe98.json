{"ast":null,"code":"import _objectSpread from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import{BackButton}from'src/App/admin/helperComponents';import{FaSortUp,FaSortDown,FaTrashAlt}from\"react-icons/fa\";// Font Awesome\nvar layoutJson=require('src/App/layout.json');var EditLayout=/*#__PURE__*/function(_Component){_inherits(EditLayout,_Component);var _super=_createSuper(EditLayout);function EditLayout(props){var _this;_classCallCheck(this,EditLayout);_this=_super.call(this,props);_this.handleChange=function(event){_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.state={menuStyle:layoutJson.menuStyle,headerAlignment:layoutJson.headerAlignment,portfolioStyle:layoutJson.portfolioStyle,pages:[],deletedLinks:[],parentLinks:[],numberOfLinks:0};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.addLink=_this.addLink.bind(_assertThisInitialized(_this));_this.removeLink=_this.removeLink.bind(_assertThisInitialized(_this));_this.changePageState=_this.changePageState.bind(_assertThisInitialized(_this));_this.changeLinkOrder=_this.changeLinkOrder.bind(_assertThisInitialized(_this));_this.returnToUserPanel=_this.returnToUserPanel.bind(_assertThisInitialized(_this));_this.onSubmit=_this.onSubmit.bind(_assertThisInitialized(_this));return _this;}// need to load a sorted array of page links\n_createClass(EditLayout,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get('/api/getPageInfo').then(function(response){var parentLinks=[];response.data.forEach(function(page){if(page.type===\"parent\"){parentLinks.push(page.title);}});var orderedPages=response.data.sort(function(page1,page2){var key1=page1.index,key2=page2.index;// Compare the 2 dates\nif(key1<key2)return-1;if(key1>key2)return 1;return 0;});_this2.setState({pages:orderedPages,numberOfLinks:orderedPages.length,parentLinks:parentLinks});});}},{key:\"createNewLink\",value:function createNewLink(){var values=_toConsumableArray(this.state.pages);values.push({title:\"Link \".concat(this.state.numberOfLinks),type:\"parent\",visible:true,children:[],index:this.state.numberOfLinks});this.setState({pages:values,numberOfLinks:this.state.numberOfLinks+1});}},{key:\"addLink\",value:function addLink(title,children){var titleExists=false;this.state.pages.forEach(function(page){if(page.title===title){var _titleExists=true;alert(\"Must use a new link title\");}});if(!titleExists){var values=_toConsumableArray(this.state.pages);var newLink={title:title,type:\"parent\",visibility:true,children:children,index:this.state.numberOfLinks};values.push(newLink);children.forEach(function(childId){for(var i=0;i<values.length;i++){if(values[i]._id===childId){values[i].parent=title;}}});var parentValues=_toConsumableArray(this.state.parentLinks);parentValues.push(newLink.title);this.setState({pages:values,numberOfLinks:this.state.numberOfLinks+1,parentLinks:parentValues});}}},{key:\"removeLink\",value:function removeLink(index){var values=_toConsumableArray(this.state.pages);var parentValues=_toConsumableArray(this.state.parentLinks);var title=values[index].title;if(values[index]._id){var deleted=_toConsumableArray(this.state.deletedLinks);deleted.push(values[index]._id);this.setState({deletedLinks:deleted});}for(var i=0;i<values.length;i++){if(i>index){values[i].index=values[i].index-1;}if(values[i].parent===title)values[i].parent=null;}values.splice(index,1);var parentIndex=parentValues.indexOf(this.state.pages[index].title);parentValues.splice(parentIndex,1);this.setState({pages:values,parentLinks:parentValues,numberOfLinks:this.state.numberOfLinks-1});}},{key:\"changePageState\",value:function changePageState(index,key,value){var values=_toConsumableArray(this.state.pages);values[index][key]=value;this.setState({pages:values});}},{key:\"changeLinkOrder\",value:function changeLinkOrder(direction,index){var newPages=_toConsumableArray(this.state.pages);if(direction===\"up\"&&index>0){newPages[index].index=index-1;newPages[index-1].index=index;}else if(direction===\"down\"&&index<this.state.pages.length-1){newPages[index].index=index+1;newPages[index+1].index=index;}newPages.sort(function(page1,page2){var key1=page1.index,key2=page2.index;// Compare the 2 dates\nif(key1<key2)return-1;if(key1>key2)return 1;return 0;});this.setState({pages:newPages});}},{key:\"returnToUserPanel\",value:function returnToUserPanel(){this.props.history.push('/userPanel');}},{key:\"onSubmit\",value:function onSubmit(){var children={};if(this.state.pages){this.state.pages.forEach(function(page){if(page.parent){children[page.parent]?children[page.parent].push(page._id):children[page.parent]=[page._id];}});}var LinkData={\"headerAlignment\":this.state.headerAlignment,\"menuStyle\":this.state.menuStyle,\"portfolioStyle\":this.state.portfolioStyle,\"pages\":this.state.pages,\"children\":children};axios.post(\"/remove/removeLinks\",this.state.deletedLinks).then(function(response){return alert(response.data);});axios.post(\"/edit/updateLinks\",LinkData).then(function(response){return alert(response.data);});}},{key:\"render\",value:function render(){var _this3=this;var createLinks=this.state.pages.map(function(page){return/*#__PURE__*/React.createElement(\"li\",{key:page.title,className:\"linkEditingContainer\"},/*#__PURE__*/React.createElement(LinkEditingObject,{index:page.index,visibility:page.visibility,title:page.title,type:page.type,parent:page.parent,allParentLinks:_this3.state.parentLinks,changeParentState:_this3.changePageState,changeOrder:_this3.changeLinkOrder,removeLink:_this3.removeLink}));});return/*#__PURE__*/React.createElement(\"div\",{className:\"pageEditor\"},/*#__PURE__*/React.createElement(BackButton,{backPage:this.returnToUserPanel}),/*#__PURE__*/React.createElement(\"div\",{className:\"linkEditing\"},/*#__PURE__*/React.createElement(\"label\",{className:\"inputLabel home\",htmlFor:\"menuStyle\"},\"Choose your navigation style:\"),/*#__PURE__*/React.createElement(\"select\",{name:\"menuStyle\",className:\"homePageSelect\",value:this.state.menuStyle,onChange:this.handleChange},/*#__PURE__*/React.createElement(\"option\",{value:\"top\"},\"Top Bar\"),/*#__PURE__*/React.createElement(\"option\",{value:\"dropdown\"},\"Dropdown Menu\"),/*#__PURE__*/React.createElement(\"option\",{value:\"sidebar\"},\"Sidebar Menu\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"linkEditing\"},/*#__PURE__*/React.createElement(\"label\",{className:\"inputLabel home\",htmlFor:\"headerAlignment\"},\"Choose your website title orientation:\"),/*#__PURE__*/React.createElement(\"select\",{name:\"headerAlignment\",className:\"homePageSelect\",value:this.state.headerAlignment,onChange:this.handleChange},/*#__PURE__*/React.createElement(\"option\",{value:\"left\"},\"Left\"),/*#__PURE__*/React.createElement(\"option\",{value:\"center\"},\"Center\"),/*#__PURE__*/React.createElement(\"option\",{value:\"right\"},\"Right\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"linkEditing\"},/*#__PURE__*/React.createElement(\"label\",{className:\"inputLabel home\",htmlFor:\"type\"},\"Choose your portfolio style:\"),/*#__PURE__*/React.createElement(\"select\",{name:\"portfolioStyle\",className:\"homePageSelect\",value:this.state.portfolioStyle,onChange:this.handleChange},/*#__PURE__*/React.createElement(\"option\",{value:\"grid\"},\"Grid\"),/*#__PURE__*/React.createElement(\"option\",{value:\"list\"},\"List\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"linkEditing\"},/*#__PURE__*/React.createElement(\"h3\",null,\"You can edit the visibility and order of your menu links below\"),createLinks),this.state.pages.length>0?/*#__PURE__*/React.createElement(ParentLinkObject,{pages:this.state.pages,addLink:this.addLink}):/*#__PURE__*/React.createElement(\"span\",null,\"Loading link adder...\"),/*#__PURE__*/React.createElement(\"div\",{className:\"layoutSubmitButtons\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"layoutSubmitButton\",onClick:this.onSubmit},\"Submit Changes\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"layoutSubmitButton\",onClick:this.returnToUserPanel},\"Cancel\")));}}]);return EditLayout;}(Component);// represents a conntainer with all the fields for editing a link\nexport{EditLayout as default};var LinkEditingObject=/*#__PURE__*/function(_Component2){_inherits(LinkEditingObject,_Component2);var _super2=_createSuper(LinkEditingObject);function LinkEditingObject(props){var _this4;_classCallCheck(this,LinkEditingObject);_this4=_super2.call(this,props);_this4.handleChange=function(event){_this4.setState(_defineProperty({},event.target.name,event.target.value));_this4.props.changeParentState(_this4.props.index,event.target.name,event.target.value);};_this4.state={visibility:_this4.props.visibility,parent:_this4.props.parent};_this4.handleChange=_this4.handleChange.bind(_assertThisInitialized(_this4));_this4.incrementLinkOrder=_this4.incrementLinkOrder.bind(_assertThisInitialized(_this4));_this4.decrementLinkOrder=_this4.decrementLinkOrder.bind(_assertThisInitialized(_this4));_this4.removeLink=_this4.removeLink.bind(_assertThisInitialized(_this4));return _this4;}_createClass(LinkEditingObject,[{key:\"decrementLinkOrder\",value:function decrementLinkOrder(){this.props.changeOrder(\"up\",this.props.index);}},{key:\"incrementLinkOrder\",value:function incrementLinkOrder(){this.props.changeOrder(\"down\",this.props.index);}},{key:\"removeLink\",value:function removeLink(){this.props.removeLink(this.props.index);}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"linkEditingField\"},\" \",this.props.title,\" \"),/*#__PURE__*/React.createElement(\"select\",{name:\"visibility\",className:\"homePageSelect linkEditingField\",value:this.state.visibility,onChange:this.handleChange},/*#__PURE__*/React.createElement(\"option\",{value:true},\"Visible\"),/*#__PURE__*/React.createElement(\"option\",{value:false},\"Not Visible\")),this.props.allParentLinks?/*#__PURE__*/React.createElement(\"select\",{name:\"parent\",className:\"homePageSelect linkEditingField\",value:this.state.parent?this.state.parent:\"none\",onChange:this.handleChange},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"None\"),this.props.allParentLinks.map(function(link){return/*#__PURE__*/React.createElement(\"option\",{key:link,value:link},link);})):null,/*#__PURE__*/React.createElement(\"div\",{className:\"linkEditingField linkOrderArrows\"},/*#__PURE__*/React.createElement(\"div\",{className:\"upArrow\",name:\"up\",onClick:this.decrementLinkOrder},/*#__PURE__*/React.createElement(FaSortUp,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"downArrow\",name:\"down\",onClick:this.incrementLinkOrder},/*#__PURE__*/React.createElement(FaSortDown,null))),this.props.type===\"parent\"?/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"linkEditingField tooltip trashButton\",onClick:this.removeLink},/*#__PURE__*/React.createElement(FaTrashAlt,null),/*#__PURE__*/React.createElement(\"span\",{className:\"tooltiptext\"},\"Remove this Link\")):null);}}]);return LinkEditingObject;}(Component);// class for creating a parent link and giving it children. When children are added to its children list\n// the respective children have their parent fields changed\n// first create link, then when they click \"create\" add it to the list \nvar ParentLinkObject=/*#__PURE__*/function(_Component3){_inherits(ParentLinkObject,_Component3);var _super3=_createSuper(ParentLinkObject);function ParentLinkObject(props){var _this5;_classCallCheck(this,ParentLinkObject);_this5=_super3.call(this,props);_this5.handleChange=function(event){if(event){_this5.setState(_defineProperty({},event.target.name,event.target.value));}};_this5.handleCheckboxChange=function(event){var name=event.target.name;_this5.setState(function(prevState){return{checkboxes:_objectSpread(_objectSpread({},prevState.checkboxes),{},_defineProperty({},name,!prevState.checkboxes[name]))};});};_this5.createCheckbox=function(page){if(page.type!==\"parent\"){return/*#__PURE__*/React.createElement(Checkbox,{key:page._id,label:page.title,name:page._id,isSelected:_this5.state.checkboxes[page._id],onCheckboxChange:_this5.handleCheckboxChange});}return null;};_this5.createCheckboxes=function(){return _this5.props.pages.map(_this5.createCheckbox);};_this5.state={title:\"\",checkboxes:props.pages.reduce(function(pages,page){return _objectSpread(_objectSpread({},pages),{},_defineProperty({},page._id,false));},{})};_this5.handleCheckboxChange=_this5.handleCheckboxChange.bind(_assertThisInitialized(_this5));_this5.handleChange=_this5.handleChange.bind(_assertThisInitialized(_this5));_this5.createCheckbox=_this5.createCheckbox.bind(_assertThisInitialized(_this5));_this5.createCheckboxes=_this5.createCheckboxes.bind(_assertThisInitialized(_this5));_this5.addLink=_this5.addLink.bind(_assertThisInitialized(_this5));_this5.clear=_this5.clear.bind(_assertThisInitialized(_this5));return _this5;}_createClass(ParentLinkObject,[{key:\"addLink\",value:function addLink(){var _this6=this;if(this.state.title!==\"\"){var children=Object.keys(this.state.checkboxes).filter(function(key){return _this6.state.checkboxes[key];});this.props.addLink(this.state.title,children);this.clear();}}},{key:\"clear\",value:function clear(){var clearedCheckBoxes=this.state.checkboxes;Object.keys(clearedCheckBoxes).forEach(function(key){return clearedCheckBoxes[key]=false;});this.setState({title:\"\",checkboxes:clearedCheckBoxes});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"parentLinkContainer\"},/*#__PURE__*/React.createElement(\"h3\",null,\" Create a New Parent Link \"),/*#__PURE__*/React.createElement(\"h5\",null,\" (For example if you want several portfolios to drop down under one link) \"),/*#__PURE__*/React.createElement(\"label\",{className:\"inputLabel\",htmlFor:\"title\"},\"Title:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"smallPageField\",name:\"title\",value:this.state.title,onChange:this.handleChange}),/*#__PURE__*/React.createElement(\"label\",{className:\"inputLabel\",htmlFor:\"children\"},\"Choose children pages:\"),/*#__PURE__*/React.createElement(\"div\",{name:\"children\",className:\"childLinkSelection\"},this.createCheckboxes()),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"layoutSubmitButton\",onClick:this.addLink},\"Add Link\"),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"layoutSubmitButton\",onClick:this.clear},\"Cancel\"));}}]);return ParentLinkObject;}(Component);// <div className=\"linkOrderArrows\">\n// \t<div className=\"upArrow\" name=\"up\" onClick={this.decrementLinkOrder}><FaSortUp/></div>\n// \t<div className=\"downArrow\" name=\"down\" onClick={this.incrementLinkOrder}><FaSortDown/></div>\n// </div>\n// <button type=\"button\" className=\"tooltip trashButton\" \n// \tonClick={this.removeLink}>\n//    \t<FaTrashAlt />\n//     <span className=\"tooltiptext\">Remove this Link</span>\n// </button>\n// <button type=\"button\" className=\"tooltip\" \n// \tonClick={this.decrementLinkOrder}>\n//    \t<FaSortUp/>\n//     <span className=\"tooltiptext\">Move link up</span>\n// </button>\n// <button type=\"button\" className=\"tooltip trashButton\" \n// \tonClick={this.incrementLinkOrder}>\n//    \t<FaSortDown/>\n//     <span className=\"tooltiptext\">Move link up</span>\n// </button>\n// taken from: http://react.tips/checkboxes-in-react-16/\nvar Checkbox=function Checkbox(_ref){var label=_ref.label,name=_ref.name,isSelected=_ref.isSelected,onCheckboxChange=_ref.onCheckboxChange;return/*#__PURE__*/React.createElement(\"div\",{className:\"childLinkCheckbox\"},/*#__PURE__*/React.createElement(\"label\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"checkbox\",name:name,checked:isSelected,onChange:onCheckboxChange,className:\"form-check-input\"}),label));};","map":{"version":3,"sources":["/Users/Steven/CS-Projects/portfolio-template/portfolioWebsite/client/src/App/admin/editLayout.js"],"names":["React","Component","axios","BackButton","FaSortUp","FaSortDown","FaTrashAlt","layoutJson","require","EditLayout","props","handleChange","event","setState","target","name","value","state","menuStyle","headerAlignment","portfolioStyle","pages","deletedLinks","parentLinks","numberOfLinks","bind","addLink","removeLink","changePageState","changeLinkOrder","returnToUserPanel","onSubmit","get","then","response","data","forEach","page","type","push","title","orderedPages","sort","page1","page2","key1","index","key2","length","values","visible","children","titleExists","alert","newLink","visibility","childId","i","_id","parent","parentValues","deleted","splice","parentIndex","indexOf","key","direction","newPages","history","LinkData","post","createLinks","map","LinkEditingObject","changeParentState","incrementLinkOrder","decrementLinkOrder","changeOrder","allParentLinks","link","ParentLinkObject","handleCheckboxChange","prevState","checkboxes","createCheckbox","createCheckboxes","reduce","clear","Object","keys","filter","clearedCheckBoxes","Checkbox","label","isSelected","onCheckboxChange"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport { BackButton } from 'src/App/admin/helperComponents';\nimport { FaSortUp, FaSortDown, FaTrashAlt } from \"react-icons/fa\";  // Font Awesome\nconst layoutJson = require('src/App/layout.json');\n\nexport default class EditLayout extends Component{\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state ={\n\t\t\tmenuStyle:layoutJson.menuStyle,\n\t\t\theaderAlignment:layoutJson.headerAlignment,\n\t\t\tportfolioStyle:layoutJson.portfolioStyle,\n\t\t\tpages:[],\n\t\t\tdeletedLinks:[],\n\t\t\tparentLinks:[],\n\t\t\tnumberOfLinks:0\n\t\t}\n\t\tthis.handleChange=this.handleChange.bind(this);\n\t\tthis.addLink=this.addLink.bind(this);\n\t\tthis.removeLink=this.removeLink.bind(this);\n\t\tthis.changePageState=this.changePageState.bind(this);\n\t\tthis.changeLinkOrder=this.changeLinkOrder.bind(this);\n    \tthis.returnToUserPanel=this.returnToUserPanel.bind(this);\n\t\tthis.onSubmit=this.onSubmit.bind(this);\n\t}\n\n\t// need to load a sorted array of page links\n\tcomponentDidMount(){\n\t\taxios.get('/api/getPageInfo').then((response) => {\n\t\t\tlet parentLinks=[];\n\t\t\tresponse.data.forEach((page)=>{\n\t\t\t\tif (page.type===\"parent\"){\n\t\t\t\t\tparentLinks.push(page.title);\n\t\t\t\t}\n\t\t\t});\n\n\t    \tlet orderedPages=(response.data).sort(function(page1, page2) {\n\t\t\t  var key1 = (page1.index),\n\t\t\t    key2 = (page2.index);\n\t\t\t  // Compare the 2 dates\n\t\t\t  if (key1 < key2) return -1;\n\t\t\t  if (key1 > key2) return 1;\n\t\t\t  return 0;\n\t\t\t});\n\t\t\tthis.setState({pages:orderedPages, numberOfLinks:orderedPages.length, parentLinks:parentLinks});\n\t\t});\n\t}\n\n\thandleChange = (event) => {\n\t\tthis.setState({[event.target.name]:event.target.value})\n\t}\n\n\tcreateNewLink(){\n\t\tlet values = [...this.state.pages];\n\t\tvalues.push({title: `Link ${this.state.numberOfLinks}`, type:\"parent\", visible:true, children:[], index:this.state.numberOfLinks});\n\t\tthis.setState({pages:values, numberOfLinks:this.state.numberOfLinks+1});\n\t}\n\n\taddLink(title, children){\n\n\t\tlet titleExists=false;\n\t\tthis.state.pages.forEach((page)=>{\n\t\t\tif (page.title===title){\n\t\t\t\tlet titleExists=true;\n\t\t\t\talert(\"Must use a new link title\")\n\t\t\t}\n\t\t});\n\t\tif (!titleExists){\n\t\t\tlet values = [...this.state.pages];\n\t\t\tlet newLink={title: title, type:\"parent\", visibility:true, children:children, index:this.state.numberOfLinks};\n\t\t\tvalues.push(newLink);\n\t\t\tchildren.forEach((childId)=>{\n\t\t\t\tfor (let i=0; i<values.length; i++){\n\t\t\t\t\tif (values[i]._id===childId){\n\t\t\t\t\t\tvalues[i].parent=title;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\tlet parentValues=[...this.state.parentLinks];\n\t\t\tparentValues.push(newLink.title);\n\t\t\tthis.setState({pages:values, numberOfLinks:this.state.numberOfLinks+1, parentLinks:parentValues});\n\t\t}\n\t}\n\n\tremoveLink(index){\n\t\tlet values = [...this.state.pages];\n\t\tlet parentValues=[...this.state.parentLinks];\n\t\tlet title = values[index].title;\n\n\t\tif(values[index]._id){\n\t\t\tlet deleted =[...this.state.deletedLinks];\n\t\t\tdeleted.push(values[index]._id);\n\t\t\tthis.setState({deletedLinks:deleted});\n\t\t}\n\n\t\tfor (let i=0; i<values.length;i++){\n\t\t\tif (i>index){\n\t\t\t\tvalues[i].index=values[i].index-1;\n\t\t\t}\n\t\t\tif (values[i].parent===title) values[i].parent=null;\n\t\t}\n\n\t\tvalues.splice(index, 1);\n\t\tlet parentIndex=parentValues.indexOf(this.state.pages[index].title)\n\t\tparentValues.splice(parentIndex, 1);\n\t\tthis.setState({pages:values, parentLinks:parentValues, numberOfLinks:this.state.numberOfLinks-1});\n\t}\n\n\tchangePageState(index, key, value){\n\t\tlet values = [...this.state.pages];\n\t\tvalues[index][key]=value;\n\t\tthis.setState({pages:values});\n\t}\n\n\n\tchangeLinkOrder(direction, index){\n\t\tvar newPages = [...this.state.pages];\n\t\tif (direction===\"up\" && index>0){\n\t\t\tnewPages[index].index = index-1;\n\t\t\tnewPages[index-1].index = index;\n\t\t} else if (direction===\"down\" && index<(this.state.pages).length-1){\n\t\t\tnewPages[index].index = index+1;\n\t\t\tnewPages[index+1].index = index;\n\t\t} \n\t\t(newPages).sort(function(page1, page2) {\n\t\t  var key1 = (page1.index),\n\t\t    key2 = (page2.index);\n\t\t  // Compare the 2 dates\n\t\t  if (key1 < key2) return -1;\n\t\t  if (key1 > key2) return 1;\n\t\t  return 0;\n\t\t});\n\t\tthis.setState({pages:newPages});\n\t}\n\n\treturnToUserPanel(){\n        this.props.history.push('/userPanel');\n    }\n\n    onSubmit(){\n\n    \tlet children = {};\n    \tif (this.state.pages){\n\t    \t(this.state.pages).forEach((page)=>{\n\t    \t\tif (page.parent){\n\t    \t\t\tchildren[page.parent] ? children[page.parent].push(page._id) : children[page.parent]=[ page._id ]\n\t    \t\t}\n\t    \t});\n    \t}\n    \tconst LinkData={\"headerAlignment\":this.state.headerAlignment, \"menuStyle\":this.state.menuStyle, \"portfolioStyle\":this.state.portfolioStyle, \"pages\":this.state.pages, \"children\":children};\n    \taxios.post(\"/remove/removeLinks\", this.state.deletedLinks).then((response)=>alert(response.data));\n    \taxios.post(\"/edit/updateLinks\", LinkData).then((response)=>alert(response.data))\n    }\n\n\trender(){\n\t\tconst createLinks = (this.state.pages).map((page)=>\n\t\t\t<li key={page.title} className=\"linkEditingContainer\"><LinkEditingObject index={page.index} visibility={page.visibility} title={page.title} type={page.type} parent={page.parent} allParentLinks={this.state.parentLinks} changeParentState={this.changePageState} changeOrder={this.changeLinkOrder} removeLink={this.removeLink}/></li>\n\t\t);\n\n\t\treturn(\n\t\t\t<div className=\"pageEditor\">\n\t\t\t\t<BackButton backPage={this.returnToUserPanel}/>\n\t\t\t\t<div className=\"linkEditing\">\n\t\t\t\t\t<label className='inputLabel home' htmlFor='menuStyle'>Choose your navigation style:</label>\n\t\t\t\t\t<select name='menuStyle' className='homePageSelect' value={this.state.menuStyle} onChange={this.handleChange}>\n\t\t\t\t\t\t<option value='top'>Top Bar</option>\n\t\t\t\t\t\t<option value='dropdown'>Dropdown Menu</option>\n\t\t\t\t\t\t<option value='sidebar'>Sidebar Menu</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"linkEditing\">\n\t\t\t\t\t<label className='inputLabel home' htmlFor='headerAlignment'>Choose your website title orientation:</label>\n\t\t\t\t\t<select name='headerAlignment' className='homePageSelect' value={this.state.headerAlignment} onChange={this.handleChange}>\n\t\t\t\t\t\t<option value='left'>Left</option>\n\t\t\t\t\t\t<option value='center'>Center</option>\n\t\t\t\t\t\t<option value='right'>Right</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"linkEditing\">\n\t\t\t\t\t<label className='inputLabel home' htmlFor='type'>Choose your portfolio style:</label>\n\t\t\t\t\t<select name='portfolioStyle' className='homePageSelect' value={this.state.portfolioStyle} onChange={this.handleChange}>\n\t\t\t\t\t\t<option value='grid'>Grid</option>\n\t\t\t\t\t\t<option value='list'>List</option>\n\t\t\t\t\t</select>\n\t\t\t\t</div>\t\t\t\t\n\t\t\t\t<div className=\"linkEditing\">\n\t\t\t\t\t<h3>You can edit the visibility and order of your menu links below</h3>\n\t\t\t\t\t{ createLinks }\n\t\t\t\t</div>\n\n\n\t\t\t\t{(this.state.pages).length>0 ? \n\t\t\t\t\t<ParentLinkObject pages={this.state.pages} addLink={this.addLink}/> :\n\t\t\t\t\t<span>Loading link adder...</span>\n\t\t\t\t}\n\n\t\t\t\t<div className=\"layoutSubmitButtons\">\n\t\t\t\t\t<button type=\"button\" className=\"layoutSubmitButton\" \n\t\t\t\t\t\tonClick={this.onSubmit}>\n\t\t\t\t    \tSubmit Changes\n\t\t\t\t\t</button>\n\t\t\t\t\t<button type=\"button\" className=\"layoutSubmitButton\" \n\t\t\t\t\t\tonClick={this.returnToUserPanel}>\n\t\t\t\t    \tCancel\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\n\n\t\t\t</div>\n\n\t\t)\n\t}\n}\n\n\n\n// represents a conntainer with all the fields for editing a link\nclass LinkEditingObject extends Component{\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state ={\n\t\t\tvisibility:this.props.visibility,\n\t\t\tparent:this.props.parent\n\t\t}\n\t\tthis.handleChange=this.handleChange.bind(this);\n\t\tthis.incrementLinkOrder=this.incrementLinkOrder.bind(this);\n\t\tthis.decrementLinkOrder=this.decrementLinkOrder.bind(this);\n\t\tthis.removeLink=this.removeLink.bind(this);\n\t}\n\n\thandleChange = (event) => {\n\t\tthis.setState({[event.target.name]:event.target.value});\n\t\tthis.props.changeParentState(this.props.index, event.target.name, event.target.value);\n\t}\n\n\tdecrementLinkOrder(){\n\t\tthis.props.changeOrder(\"up\", this.props.index)\n\t}\n\n\tincrementLinkOrder(){\n\t\tthis.props.changeOrder(\"down\", this.props.index)\n\t}\n\n\tremoveLink(){\n\t\tthis.props.removeLink(this.props.index);\n\t}\n\n\trender(){\n\t\treturn(\n\t\t\t<div>\n\t\t\t\t<div className='linkEditingField'> {this.props.title} </div>\n\t\t\t\t<select name='visibility' className='homePageSelect linkEditingField' value={this.state.visibility} onChange={this.handleChange}>\n\t\t\t\t\t<option value={true}>Visible</option>\n\t\t\t\t\t<option value={false}>Not Visible</option>\n\t\t\t\t</select>\n\t\t\t\t{\n\t\t\t\t\tthis.props.allParentLinks ?  \n\t\t\t\t\t<select name='parent' className='homePageSelect linkEditingField' value={this.state.parent ? this.state.parent : \"none\"} onChange={this.handleChange}>\n\t\t\t\t\t\t<option value={\"\"}>None</option>\n\t\t\t\t\t\t{ this.props.allParentLinks.map((link)=>\n\t\t\t\t\t\t\t<option key={link} value={link}>{link}</option>\n\t\t\t\t\t\t) }\n\t\t\t\t\t</select> : null\n\t\t\t\t}\n\t\t\t\t<div className=\"linkEditingField linkOrderArrows\">\n\t\t\t\t\t<div className=\"upArrow\" name=\"up\" onClick={this.decrementLinkOrder}><FaSortUp/></div>\n\t\t\t\t\t<div className=\"downArrow\" name=\"down\" onClick={this.incrementLinkOrder}><FaSortDown/></div>\n\t\t\t\t</div>\n\t\t\t\t{ this.props.type===\"parent\" ? \n\t\t\t\t\t<button type=\"button\" className=\"linkEditingField tooltip trashButton\" \n\t\t\t\t\t\tonClick={this.removeLink}>\n\t\t\t\t    \t<FaTrashAlt />\n\t\t\t\t\t    <span className=\"tooltiptext\">Remove this Link</span>\n\t\t\t\t\t</button> : null\n\t\t\t\t}\n\t\t\t</div>\n\t\t)\n\t}\n\n}\n\n\n\n// class for creating a parent link and giving it children. When children are added to its children list\n// the respective children have their parent fields changed\n\n\n// first create link, then when they click \"create\" add it to the list \nclass ParentLinkObject extends Component {\n\tconstructor(props){\n\t\tsuper(props)\n\t\tthis.state ={\n\t\t\ttitle:\"\",\n\t\t\tcheckboxes: (props.pages).reduce(\n\t\t      (pages, page) => ({\n\t\t        ...pages,\n\t\t        [page._id]: false\n\t\t      }),\n\t\t      {}\n\t\t    )\n\t\t}\n\n\t\tthis.handleCheckboxChange=this.handleCheckboxChange.bind(this);\n\t\tthis.handleChange=this.handleChange.bind(this);\n\t\tthis.createCheckbox=this.createCheckbox.bind(this);\n\t\tthis.createCheckboxes=this.createCheckboxes.bind(this);\t\n\t\tthis.addLink=this.addLink.bind(this);\n\t\tthis.clear=this.clear.bind(this);\n\t}\n\n\thandleChange = (event) => {\n\t\tif (event){\n\t\t\tthis.setState({[event.target.name]:event.target.value})\n\t\t}\n\t}\n\n\thandleCheckboxChange = event => {\n\t    const { name } = event.target;\n\n\t    this.setState(prevState => ({\n\t      checkboxes: {\n\t        ...prevState.checkboxes,\n\t        [name]: !prevState.checkboxes[name]\n\t      }\n\t    }));\n\t};\n\n\tcreateCheckbox = page =>{ \n\t\tif (page.type!==\"parent\"){\n\t\t\treturn (\n\t\t\t\t<Checkbox\n\t\t\t\t  key={page._id}\n\t\t\t\t  label={page.title}\n\t\t\t\t  name={page._id}\n\t\t\t\t  isSelected={this.state.checkboxes[page._id]}\n\t\t\t\t  onCheckboxChange={this.handleCheckboxChange}\n\t\t\t\t/>\n\t\t\t);\t\t\n\t\t} \n\t\treturn null;\n\n\t}\n\n\tcreateCheckboxes = () => (this.props.pages).map(this.createCheckbox);\n\n\n\taddLink(){\n\t\tif (this.state.title!==\"\"){\n\t\t\tlet children = Object.keys(this.state.checkboxes).filter(key => this.state.checkboxes[key])\n\t\t\tthis.props.addLink(this.state.title, children);\n\t\t\tthis.clear();\t\n\t\t}\n\t}\n\n\tclear(){\n\t\tlet clearedCheckBoxes=this.state.checkboxes;\n\t\tObject.keys(clearedCheckBoxes).forEach((key)=>clearedCheckBoxes[key]=false)\n\n\t\tthis.setState({\t\t\t\n\t\t\ttitle: \"\",\n\t\t\tcheckboxes: clearedCheckBoxes\n\t\t});\n\t};\n\n\n\trender(){\n\t\treturn(\n\t\t\t<div className=\"parentLinkContainer\">\n\t\t\t\t<h3> Create a New Parent Link </h3>\n\t\t\t\t<h5> (For example if you want several portfolios to drop down under one link) </h5>\n\t\t\t\t<label className='inputLabel' htmlFor=\"title\">Title:</label>\n\t\t\t\t<input type='text' className='smallPageField' name=\"title\" value={this.state.title} onChange={this.handleChange}/>\n\t\t\t\t<label className='inputLabel' htmlFor=\"children\">Choose children pages:</label>\n\t\t\t\t<div name=\"children\" className=\"childLinkSelection\">\n\t\t\t\t\t{ this.createCheckboxes() }\n\t\t\t\t</div>\n\t\t\t\t<button type=\"button\" className=\"layoutSubmitButton\" \n\t\t\t\t\tonClick={this.addLink}>\n\t\t\t    \tAdd Link\n\t\t\t\t</button>\n\t\t\t\t<button type=\"button\" className=\"layoutSubmitButton\" \n\t\t\t\t\tonClick={this.clear}>\n\t\t\t    \tCancel\n\t\t\t\t</button>\t\t\t\n\t\t\t</div>\n\t\t)\n\t}\n\n\n}\n\n\t\t\t\t// <div className=\"linkOrderArrows\">\n\t\t\t\t// \t<div className=\"upArrow\" name=\"up\" onClick={this.decrementLinkOrder}><FaSortUp/></div>\n\t\t\t\t// \t<div className=\"downArrow\" name=\"down\" onClick={this.incrementLinkOrder}><FaSortDown/></div>\n\t\t\t\t// </div>\n\t\t\t\t// <button type=\"button\" className=\"tooltip trashButton\" \n\t\t\t\t// \tonClick={this.removeLink}>\n\t\t\t //    \t<FaTrashAlt />\n\t\t\t\t//     <span className=\"tooltiptext\">Remove this Link</span>\n\t\t\t\t// </button>\n\n\n\n\t\t\t\t// <button type=\"button\" className=\"tooltip\" \n\t\t\t\t// \tonClick={this.decrementLinkOrder}>\n\t\t\t //    \t<FaSortUp/>\n\t\t\t\t//     <span className=\"tooltiptext\">Move link up</span>\n\t\t\t\t// </button>\n\t\t\t\t// <button type=\"button\" className=\"tooltip trashButton\" \n\t\t\t\t// \tonClick={this.incrementLinkOrder}>\n\t\t\t //    \t<FaSortDown/>\n\t\t\t\t//     <span className=\"tooltiptext\">Move link up</span>\n\t\t\t\t// </button>\n\n\n// taken from: http://react.tips/checkboxes-in-react-16/\nconst Checkbox = ({ label, name, isSelected, onCheckboxChange }) => (\n  <div className=\"childLinkCheckbox\">\n    <label>\n      <input\n        type=\"checkbox\"\n        name={name}\n        checked={isSelected}\n        onChange={onCheckboxChange}\n        className=\"form-check-input\"\n      />\n      {label}\n    </label>\n  </div>\n);"]},"metadata":{},"sourceType":"module"}